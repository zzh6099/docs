<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>模板 | Toolkit Docs</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/docs/assets/css/0.styles.61c225ce.css" as="style"><link rel="preload" href="/docs/assets/js/app.bf9abde5.js" as="script"><link rel="preload" href="/docs/assets/js/2.7081bd21.js" as="script"><link rel="preload" href="/docs/assets/js/13.3fc83587.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.17413e17.js"><link rel="prefetch" href="/docs/assets/js/11.3ba4e15f.js"><link rel="prefetch" href="/docs/assets/js/12.81f60ba6.js"><link rel="prefetch" href="/docs/assets/js/3.d04f4a97.js"><link rel="prefetch" href="/docs/assets/js/4.61cab350.js"><link rel="prefetch" href="/docs/assets/js/5.37fc0b0c.js"><link rel="prefetch" href="/docs/assets/js/6.063b7e44.js"><link rel="prefetch" href="/docs/assets/js/7.2d382900.js"><link rel="prefetch" href="/docs/assets/js/8.6c1f93ed.js"><link rel="prefetch" href="/docs/assets/js/9.9b30310a.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.61c225ce.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">Toolkit Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/" class="nav-link">
  框架文档
</a></div><div class="nav-item"><a href="/docs/other.html" class="nav-link">
  toolkit 工具库
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/" class="nav-link">
  框架文档
</a></div><div class="nav-item"><a href="/docs/other.html" class="nav-link">
  toolkit 工具库
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/docs/" aria-current="page" class="sidebar-link">介绍</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/#键路径" class="sidebar-link">键路径</a></li></ul></li><li><a href="/docs/options.html" class="sidebar-link">选项</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/options.html#dom" class="sidebar-link">DOM</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/options.html#el" class="sidebar-link">el</a></li><li class="sidebar-sub-header"><a href="/docs/options.html#template" class="sidebar-link">template</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/options.html#数据" class="sidebar-link">数据</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/options.html#data" class="sidebar-link">data</a></li><li class="sidebar-sub-header"><a href="/docs/options.html#props" class="sidebar-link">props</a></li><li class="sidebar-sub-header"><a href="/docs/options.html#computed" class="sidebar-link">computed</a></li><li class="sidebar-sub-header"><a href="/docs/options.html#methods" class="sidebar-link">methods</a></li><li class="sidebar-sub-header"><a href="/docs/options.html#watch" class="sidebar-link">watch</a></li><li class="sidebar-sub-header"><a href="/docs/options.html#emits" class="sidebar-link">emits</a></li><li class="sidebar-sub-header"><a href="/docs/options.html#store" class="sidebar-link">store</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/options.html#资源" class="sidebar-link">资源</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/options.html#mixins" class="sidebar-link">mixins</a></li><li class="sidebar-sub-header"><a href="/docs/options.html#components" class="sidebar-link">components</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/options.html#生命周期钩子" class="sidebar-link">生命周期钩子</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/options.html#beforemount" class="sidebar-link">beforeMount</a></li><li class="sidebar-sub-header"><a href="/docs/options.html#mounted" class="sidebar-link">mounted</a></li><li class="sidebar-sub-header"><a href="/docs/options.html#beforeupdate" class="sidebar-link">beforeUpdate</a></li><li class="sidebar-sub-header"><a href="/docs/options.html#updated" class="sidebar-link">updated</a></li><li class="sidebar-sub-header"><a href="/docs/options.html#beforeunmount" class="sidebar-link">beforeUnmount</a></li><li class="sidebar-sub-header"><a href="/docs/options.html#unmounted" class="sidebar-link">unmounted</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/options.html#其它选项" class="sidebar-link">其它选项</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/options.html#inheritattrs" class="sidebar-link">inheritAttrs</a></li><li class="sidebar-sub-header"><a href="/docs/options.html#comments" class="sidebar-link">comments</a></li><li class="sidebar-sub-header"><a href="/docs/options.html#style" class="sidebar-link">style</a></li></ul></li></ul></li><li><a href="/docs/template.html" aria-current="page" class="active sidebar-link">模板</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/template.html#语法" class="sidebar-link">语法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/template.html#绑定数据-文本插值" class="sidebar-link">绑定数据-文本插值</a></li><li class="sidebar-sub-header"><a href="/docs/template.html#绑定数据-动态属性" class="sidebar-link">绑定数据-动态属性</a></li><li class="sidebar-sub-header"><a href="/docs/template.html#class-与-style" class="sidebar-link">class 与 style</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/template.html#指令" class="sidebar-link">指令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/template.html#for" class="sidebar-link">$for</a></li><li class="sidebar-sub-header"><a href="/docs/template.html#if" class="sidebar-link">$if</a></li><li class="sidebar-sub-header"><a href="/docs/template.html#else-if" class="sidebar-link">$else-if</a></li><li class="sidebar-sub-header"><a href="/docs/template.html#else" class="sidebar-link">$else</a></li><li class="sidebar-sub-header"><a href="/docs/template.html#show" class="sidebar-link">$show</a></li><li class="sidebar-sub-header"><a href="/docs/template.html#bind" class="sidebar-link">$bind</a></li><li class="sidebar-sub-header"><a href="/docs/template.html#model" class="sidebar-link">$model</a></li><li class="sidebar-sub-header"><a href="/docs/template.html#ref" class="sidebar-link">$ref</a></li><li class="sidebar-sub-header"><a href="/docs/template.html#allow-html" class="sidebar-link">$allow-html</a></li><li class="sidebar-sub-header"><a href="/docs/template.html#once" class="sidebar-link">$once</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/template.html#特殊属性" class="sidebar-link">特殊属性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/template.html#key" class="sidebar-link">key</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/template.html#事件绑定" class="sidebar-link">事件绑定</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/template.html#事件绑定符" class="sidebar-link">事件绑定符 “@”</a></li><li class="sidebar-sub-header"><a href="/docs/template.html#箭头函数" class="sidebar-link">箭头函数</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/template.html#内置元素" class="sidebar-link">内置元素</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/template.html#block" class="sidebar-link">block</a></li><li class="sidebar-sub-header"><a href="/docs/template.html#slot" class="sidebar-link">slot</a></li><li class="sidebar-sub-header"><a href="/docs/template.html#transition" class="sidebar-link">transition</a></li></ul></li></ul></li><li><a href="/docs/instance.html" class="sidebar-link">实例方法/属性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/instance.html#方法" class="sidebar-link">方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/instance.html#setdata" class="sidebar-link">$setData</a></li><li class="sidebar-sub-header"><a href="/docs/instance.html#emit" class="sidebar-link">$emit</a></li><li class="sidebar-sub-header"><a href="/docs/instance.html#watch" class="sidebar-link">$watch</a></li><li class="sidebar-sub-header"><a href="/docs/instance.html#mount" class="sidebar-link">$mount</a></li><li class="sidebar-sub-header"><a href="/docs/instance.html#destroy" class="sidebar-link">$destroy</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/instance.html#属性" class="sidebar-link">属性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/instance.html#refs" class="sidebar-link">$refs</a></li><li class="sidebar-sub-header"><a href="/docs/instance.html#attrs" class="sidebar-link">$attrs</a></li><li class="sidebar-sub-header"><a href="/docs/instance.html#el" class="sidebar-link">$el</a></li><li class="sidebar-sub-header"><a href="/docs/instance.html#parent" class="sidebar-link">$parent</a></li><li class="sidebar-sub-header"><a href="/docs/instance.html#store" class="sidebar-link">$store</a></li></ul></li></ul></li><li><a href="/docs/component.html" class="sidebar-link">组件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/component.html#介绍" class="sidebar-link">介绍</a></li><li class="sidebar-sub-header"><a href="/docs/component.html#注册局部组件" class="sidebar-link">注册局部组件</a></li><li class="sidebar-sub-header"><a href="/docs/component.html#注册全局组件" class="sidebar-link">注册全局组件</a></li><li class="sidebar-sub-header"><a href="/docs/component.html#组件库" class="sidebar-link">组件库</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/component.html#导出组件" class="sidebar-link">导出组件</a></li><li class="sidebar-sub-header"><a href="/docs/component.html#导入组件" class="sidebar-link">导入组件</a></li></ul></li></ul></li><li><a href="/docs/store.html" class="sidebar-link">状态管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/store.html#介绍" class="sidebar-link">介绍</a></li><li class="sidebar-sub-header"><a href="/docs/store.html#state" class="sidebar-link">state</a></li><li class="sidebar-sub-header"><a href="/docs/store.html#getters" class="sidebar-link">getters</a></li><li class="sidebar-sub-header"><a href="/docs/store.html#actions" class="sidebar-link">actions</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="模板"><a href="#模板" class="header-anchor">#</a> 模板</h1> <h2 id="语法"><a href="#语法" class="header-anchor">#</a> 语法</h2> <p>模板使用基于 HTML 的语法，允许开发者声明式地将 DOM 绑定到实例的数据。</p> <p>在底层的实现上，模板会被编译成虚拟 DOM 渲染函数。结合响应系统，能够智能地计算出最少需要重新渲染多少组件，并把 DOM 操作次数减到最少。</p> <h3 id="绑定数据-文本插值"><a href="#绑定数据-文本插值" class="header-anchor">#</a> 绑定数据-文本插值</h3> <p>数据绑定最常见的形式就是使用 “Mustache” 语法 (双大括号) 的文本插值，可用于 HTML 的文本及属性：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>class_a {{ myClass }}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Message: {{ msg }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Mustache 标签将会被替换为数据对象上对应的属性值。当绑定的数据对象上的属性发生了改变，插值处的内容都会更新。</p> <p>在 Mustache 标签内，支持完全的 JS 表达式，且表达式结果<strong>会</strong>转换为字符串：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span><span class="token punctuation">{</span> number <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>

<span class="token punctuation">{</span><span class="token punctuation">{</span> ok <span class="token operator">?</span> <span class="token string">'YES'</span> <span class="token operator">:</span> <span class="token string">'NO'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>

<span class="token punctuation">{</span><span class="token punctuation">{</span> message<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>

<span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token keyword">new</span> <span class="token class-name">Date</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>

<span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token string">'list-'</span> <span class="token operator">+</span> id <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="绑定数据-动态属性"><a href="#绑定数据-动态属性" class="header-anchor">#</a> 绑定数据-动态属性</h3> <p>在 HTML 的属性上，除了使用文本插值，我们还可以像这样来绑定数据到元素属性：</p> <div data-info="mydemo%20%5Bparser%5D%20%5Bhorizontal%5D%20%5Bheight%3D80%5D" data-type="parser" class="docs-demo-plugin__wrapper"><div class="docs-demo-plugin__code"><div class="language-js extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-js"><code>toolkit<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  template<span class="token operator">:</span>
    <span class="token string">'&lt;span :title=&quot;message&quot;&gt;\
      鼠标悬停几秒钟查看此处动态绑定的提示信息！\
    &lt;/span&gt;'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      message<span class="token operator">:</span> <span class="token string">'页面加载于 '</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  el<span class="token operator">:</span> <span class="token string">'#app'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <div class="docs-demo-plugin__display"><div class="docs-demo-plugin__app"></div></div></div><p>在属性名加上 “:” 前缀，代表该属性为动态属性，属性值会作为 JS 表达式执行。</p> <p>与文本插值一样，支持完全的 JS 表达式：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number + 1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ok ? <span class="token punctuation">'</span>YES<span class="token punctuation">'</span> : <span class="token punctuation">'</span>NO<span class="token punctuation">'</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>message.split(<span class="token punctuation">'</span><span class="token punctuation">'</span>).reverse().join(<span class="token punctuation">'</span><span class="token punctuation">'</span>)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>new Date<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">'</span>list-<span class="token punctuation">'</span> + id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="在-dom-元素上使用动态属性"><a href="#在-dom-元素上使用动态属性" class="header-anchor">#</a> 在 DOM 元素上使用动态属性</h4> <p>当表达式结果为 <code>null</code> 或 <code>undefined</code> 时，该属性不会出现在渲染出来的 DOM 元素中：</p> <div class="language-html extra-class"><div class="highlight-lines"><div class="highlighted"> </div><br><br><br><br></div><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">:disabled</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>null<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>Button<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--渲染的 DOM 元素，没有 disabled 属性--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>Button<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>当表达式结果不是字符串时，会转换为字符串，作为该属性的属性值。</p> <h4 id="在组件元素上使用动态属性"><a href="#在组件元素上使用动态属性" class="header-anchor">#</a> 在组件元素上使用动态属性</h4> <p>表达式结果会直接传递给组件实例。详情请看：<a href="/docs/options.html#props">组件属性</a></p> <h4 id="在-js-表达式内的字符串"><a href="#在-js-表达式内的字符串" class="header-anchor">#</a> 在 JS 表达式内的字符串</h4> <p>JS 表达式内使用字符串时，要注意引号的使用。</p> <p>本框架除了支持常规的单引号/双引号外，还支持使用反引号“`”。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 推荐在属性值上使用反引号</span>
<span class="token string">'&lt;div :class=`use_b ? &quot;class-b&quot; : &quot;class-c&quot;` &gt;&lt;/div&gt;'</span>

<span class="token comment">// 如果要兼容的最低版本浏览器支持模板字符串特性</span>
<span class="token string">'&lt;div :class=&quot;use_b ? `class-b` : `class-c`&quot; &gt;&lt;/div&gt;'</span>
<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div :class=&quot;use_b ? 'class-b' : 'class-c'&quot; &gt;&lt;/div&gt;</span><span class="token template-punctuation string">`</span></span>

<span class="token comment">// 使用与模板相同的引号，用一个反斜杠转义</span>
<span class="token string">'&lt;div :class=&quot;use_b ? \'class-b\' : \'class-c\'&quot; &gt;&lt;/div&gt;'</span>
<span class="token string">&quot;&lt;div :class='use_b ? \&quot;class-b\&quot; : \&quot;class-c\&quot;' &gt;&lt;/div&gt;&quot;</span>

<span class="token comment">// 使用与属性值相同的引号，用两个反斜杠</span>
<span class="token string">'&lt;div :class=&quot;use_b ? \\&quot;class-b\\&quot; : \\&quot;class-c\\&quot;&quot; &gt;&lt;/div&gt;'</span>
<span class="token string">&quot;&lt;div :class='use_b ? \\'class-b\\' : \\'class-c\\'' &gt;&lt;/div&gt;&quot;</span>
</code></pre></div><h3 id="class-与-style"><a href="#class-与-style" class="header-anchor">#</a> class 与 style</h3> <p>操作元素的 class 和 style 是数据绑定的一个常见需求。通过使用表达式计算出字符串结果，即可实现绑定。</p> <p>不过字符串拼接麻烦且易错。因此，在将文本插值或动态属性用于 class 和 style 时，做了专门的增强。表达式结果的类型除了字符串之外，还可以是对象或数组。对象或数组会被转换为适用于 class 和 style 的字符串，作为表达式的最终结果。</p> <h4 id="绑定-class"><a href="#绑定-class" class="header-anchor">#</a> 绑定 class</h4> <p>使用<strong>对象语法</strong>，我们可以传给 class 一个对象，以动态地切换 class：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>static {{ { active: isActive } }}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>上面的语法表示 active 这个 class 存在与否将取决于 isActive 这个数据是否为“真”。</p> <p>你可以在对象中传入更多字段来动态切换多个 class。</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-js"><code>toolkit<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  template<span class="token operator">:</span>
    <span class="token string">'&lt;div class=`static {{ { active: isActive, &quot;text-danger&quot;: hasError } }}`&gt;&lt;/div&gt;'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      isActive<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      hasError<span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  el<span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>结果渲染为：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>static active<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>绑定的数据对象不必内联定义在模板里：</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-js"><code>toolkit<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  template<span class="token operator">:</span>
    <span class="token string">'&lt;div class=&quot;static {{ classObject }}&quot;&gt;&lt;/div&gt;'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      classObject<span class="token operator">:</span> <span class="token punctuation">{</span>
        active<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token string">'text-danger'</span><span class="token operator">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  el<span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>渲染的结果和上面一样。我们也可以绑定一个返回对象的计算属性。这是一个处理复杂逻辑的常用模式：</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br></div><pre class="language-js"><code>toolkit<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  template<span class="token operator">:</span>
    <span class="token string">'&lt;div class=&quot;static {{ classObject }}&quot;&gt;&lt;/div&gt;'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      isActive<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      error<span class="token operator">:</span> <span class="token keyword">null</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  computed<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">classObject</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        active<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>isActive <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>error<span class="token punctuation">,</span>
        <span class="token string">'text-danger'</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>error <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>error<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'fatal'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  el<span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>使用<strong>数组语法</strong>，我们可以把一个数组传给 class，以应用一个 class 列表：</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-js"><code>toolkit<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  template<span class="token operator">:</span>
    <span class="token string">'&lt;div :class=&quot;[activeClass, errorClass]&quot; &gt;&lt;/div&gt;'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      activeClass<span class="token operator">:</span> <span class="token string">'active'</span><span class="token punctuation">,</span>
      errorClass<span class="token operator">:</span> <span class="token string">'text-danger'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  el<span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>渲染为：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>active text-danger<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>如果你也想根据条件切换列表中的 class，可以用三元表达式：</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-js"><code>toolkit<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  template<span class="token operator">:</span>
    <span class="token string">'&lt;div :class=`[isActive ? activeClass : &quot;&quot;, errorClass]`&gt;&lt;/div&gt;'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      isActive<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      activeClass<span class="token operator">:</span> <span class="token string">'active'</span><span class="token punctuation">,</span>
      errorClass<span class="token operator">:</span> <span class="token string">'text-danger'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  el<span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>这样写将始终添加 errorClass，但是只有在 isActive 为 “真” 时才添加 activeClass。</p> <p>不过，当有多个条件 class 时这样写有些繁琐。所以在数组语法中也可以使用对象语法：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[{ active: isActive }, errorClass]<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="绑定-style"><a href="#绑定-style" class="header-anchor">#</a> 绑定 style</h4> <p>使用<strong>对象语法</strong>，对象语法十分直观——看着非常像 CSS，但其实是一个 JS 对象。对于短横线分隔的 CSS 属性，记得用引号括起来。</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-js"><code>toolkit<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  template<span class="token operator">:</span>
    <span class="token string">'&lt;div :style=`{ color: activeColor, &quot;font-size&quot;: fontSize + &quot;px&quot; }` &gt;&lt;/div&gt;'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      activeColor<span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span>
      fontSize<span class="token operator">:</span> <span class="token number">30</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  el<span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>直接绑定到一个样式对象通常更好，这会让模板更清晰：</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-js"><code>toolkit<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  template<span class="token operator">:</span>
    <span class="token string">'&lt;div :style=&quot;styleObject&quot;&gt;&lt;/div&gt;'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      styleObject<span class="token operator">:</span> <span class="token punctuation">{</span>
        color<span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span>
        fontSize<span class="token operator">:</span> <span class="token string">'13px'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  el<span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>同样的，对象语法常常结合返回对象的计算属性使用。</p> <p>使用<strong>数组语法</strong>，可以将多个样式对象应用到同一个元素上：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[baseStyles, overridingStyles]<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="指令"><a href="#指令" class="header-anchor">#</a> 指令</h2> <h3 id="for"><a href="#for" class="header-anchor">#</a> $for</h3> <ul><li><p><strong>类型</strong>：<code>Array | Object | String | Number</code></p></li> <li><p><strong>用法</strong>：</p> <p>可以用 <code>$for</code> 指令基于一个数据源来渲染一个列表。<code>$for</code> 指令需要使用 <code>alias in expression</code> 形式的特殊语法，其中 <code>expression</code> 是数据源，而 <code>alias</code> 则是被迭代的数据项的别名。</p> <p>数据源可以是数组、对象、字符串、整数。遍历数组时，<code>alias</code> 是数组元素。遍历对象时，<code>alias</code> 是对象的属性值。遍历字符串时，<code>alias</code> 是各个字符。遍历整数时，<code>alias</code> 是从 1 起至整数值的数值。</p> <div data-info="mydemo%20%5Bparser%5D%20%5Bhorizontal%5D%20%5Bheight%3D120%5D" data-type="parser" class="docs-demo-plugin__wrapper"><div class="docs-demo-plugin__code"><div class="language-js extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-js"><code>toolkit<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  template<span class="token operator">:</span>
    <span class="token string">'&lt;ul&gt;\
      &lt;li $for=&quot;item in items&quot;&gt;\
        {{ item.message }}\
      &lt;/li&gt;\
    &lt;/ul&gt;'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      items<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">'Foo'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">'Bar'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  el<span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <div class="docs-demo-plugin__display"><div class="docs-demo-plugin__app"></div></div></div><p>另外也可以为索引、对象的属性名指定别名：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 数组的索引别名 index --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">$for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(item, index) in Array<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 对象的属性名别名 key --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">$for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(value, key) in Object<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 对象的属性名、索引别名 key、index --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">$for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(value, key, index) in Object<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 字符串的索引别名 index --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">$for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(char, index) in String<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 数字的索引别名 index --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">$for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(n, index) in Number<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><hr> <p>在遍历对象时，会按 <code>Object.keys()</code> 的结果遍历，但是<strong>不能</strong>保证它的结果在不同的 JS 引擎下都一致。</p> <p><code>Object.keys()</code> 在遍历对象属性时会先提取所有 key 的 <code>parseFloat</code> 值为非负整数的属性，然后根据数字顺序对属性排序首先遍历出来，最后按照对象定义的顺序遍历余下的所有属性。</p> <div class="language-html extra-class"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">$for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>value in object<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    {{ value }}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><hr> <p>整数遍历，支持直接指定一个整数，从 1 开始遍历至指定的整数值：</p> <div class="language-html extra-class"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">$for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>value in 10<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    {{ value }}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>还支持指定一个范围，使用 <code>( start ... end )</code> 语法，从 start 开始遍历至 end：</p> <div class="language-html extra-class"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">$for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>value in (5...10)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    {{ value }}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><hr> <p>在 <code>$for</code> 指令的作用域范围内使用的 <code>methods</code> 中的方法，可以直接通过 <code>this</code> 访问到别名的数据，而且在遍历数组、对象时支持使用 <code>$setData</code> 修改别名的数据。</p> <div data-info="mydemo%20%5Bparser%5D%20%5Bhorizontal%5D%20%5Bheight%3D160%5D" data-type="parser" class="docs-demo-plugin__wrapper"><div class="docs-demo-plugin__code"><div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-js"><code>toolkit<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  template<span class="token operator">:</span>
    <span class="token string">'&lt;div&gt;items：{{ items }}&lt;/div&gt;\
    &lt;ul&gt;\
      &lt;li $for=&quot;item in items&quot; @click=&quot;reverse&quot;&gt;\
        {{ item.message }}\
      &lt;/li&gt;\
    &lt;/ul&gt;'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      items<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">'Foo'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">'Bar'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$setData</span><span class="token punctuation">(</span><span class="token string">&quot;item.message&quot;</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>item<span class="token punctuation">.</span>message<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  el<span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <div class="docs-demo-plugin__display"><div class="docs-demo-plugin__app"></div></div></div><hr> <p>如果数据项的顺序被改变，默认情况下<strong>不会</strong>移动 DOM 元素来重新排序，而是直接更新每个元素，并且确保它们在每个索引位置正确渲染。</p> <p>这个默认的模式是高效的，但是<strong>只适用于不依赖子组件状态或临时 DOM 状态 (例如：表单输入值) 的列表渲染输出</strong>。</p> <p>若要强制其重新排序 DOM 元素，你需要为每项提供一个唯一的 <code>key</code> 来作为排序提示，用于识别每个节点的身份，从而重用和重新排序现有元素。</p> <div class="language-html extra-class"><div class="highlight-lines"><div class="highlighted"> </div><br><br><br></div><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">$for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in items<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  {{ item.text }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>建议尽可能在使用 <code>$for</code> 时提供 <code>key</code>，除非遍历输出的 DOM 内容非常简单且不存在状态。</p> <p><code>key</code> 并不仅与 $for 特别关联。它还具有其它用途，请参考<a href="/docs/template.html#key">特殊属性 - key</a></p> <hr> <p><code>$for</code> 与 <code>$if</code> 一同使用时，<code>$if</code> 的优先级比 <code>$for</code> 更高。</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>在 Vue 2.x 中，<code>v-for</code> 的优先级比 <code>v-if</code> 更高，这意味着 <code>v-if</code> 将分别重复运行于每个 <code>v-for</code> 循环中，从而过滤不需要的数据。</p> <p>而在 Vue 3 中，则变更为<code>v-if</code> 的优先级比 <code>v-for</code> 更高。</p></div> <p>在这规则下，当你想过滤数据项，只为部分数据项渲染节点时，建议使用 <code>computed</code> 或 <code>methods</code>。</p> <div class="language-html extra-class"><pre class="language-html"><code>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">$for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>todo in todos<span class="token punctuation">&quot;</span></span> <span class="token attr-name">$if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  {{ todo }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p>上面模板的渲染逻辑，相当于：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>show<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> todos<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> todo <span class="token operator">=</span> todos<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
    <span class="token function">render</span><span class="token punctuation">(</span>todo<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>基于该规则 <code>$for</code> 也能与 <code>$else-if</code> 或 <code>$else</code> 一同使用</p> <div class="language-html extra-class"><div class="highlight-lines"><div class="highlighted"> </div><br><br><div class="highlighted"> </div><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">$for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>todo in todos<span class="token punctuation">&quot;</span></span> <span class="token attr-name">$if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>todos.length &gt; 100<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
 {{ todo }} 大于 100
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">$for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>todo in todos<span class="token punctuation">&quot;</span></span> <span class="token attr-name">$else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>todos.length &gt; 50<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
 {{ todo }} 大于 50
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">$for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>todo in todos<span class="token punctuation">&quot;</span></span> <span class="token attr-name">$else</span><span class="token punctuation">&gt;</span></span>
 {{ todo }} 其它
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul> <h3 id="if"><a href="#if" class="header-anchor">#</a> $if</h3> <ul><li><p><strong>类型</strong>：<code>any</code></p></li> <li><p><strong>用法</strong>：</p> <p>根据表达式的值是否为 “真” 来有条件地渲染元素。在切换时元素 / 组件被销毁并重建。</p> <div class="language-html extra-class"><div class="highlight-lines"><div class="highlighted"> </div><br><br><br></div><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">$if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Math.random() &gt; 0.5<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  A
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul> <h3 id="else-if"><a href="#else-if" class="header-anchor">#</a> $else-if</h3> <ul><li><p><strong>类型</strong>：<code>any</code></p></li> <li><p><strong>限制</strong>：前一兄弟元素必须有 <code>$if</code> 或 <code>$else-if</code>。</p></li> <li><p><strong>用法</strong>：</p> <p>表示 <code>$if</code> 的“else if 块”。可以连续多次使用。</p> <div class="language-html extra-class"><div class="highlight-lines"><div class="highlighted"> </div><br><br><div class="highlighted"> </div><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">$if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Math.random() &gt; 0.8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  A
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">$else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Math.random() &gt; 0.6<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  B
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">$else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Math.random() &gt; 0.4<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  C
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul> <h3 id="else"><a href="#else" class="header-anchor">#</a> $else</h3> <ul><li><p><strong>不需要表达式</strong></p></li> <li><p><strong>限制</strong>：前一兄弟元素必须有 <code>$if</code> 或 <code>$else-if</code>。</p></li> <li><p><strong>用法</strong>：</p> <p>为 <code>$if</code> 或者 <code>$else-if</code> 添加“else 块”。</p> <div class="language-html extra-class"><div class="highlight-lines"><div class="highlighted"> </div><br><br><div class="highlighted"> </div><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">$if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Math.random() &gt; 0.8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  A
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">$else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Math.random() &gt; 0.6<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  B
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">$else</span><span class="token punctuation">&gt;</span></span>
  C
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul> <h3 id="show"><a href="#show" class="header-anchor">#</a> $show</h3> <ul><li><p><strong>类型</strong>：<code>any</code></p></li> <li><p><strong>用法</strong>：</p> <p>根据表达式的值是否为 “真” 来有条件地显示元素。在切换时元素 / 组件只是简单地切换元素的<code>display</code> CSS 属性。</p> <div class="language-html extra-class"><div class="highlight-lines"><div class="highlighted"> </div><br><br><br></div><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">$show</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Math.random() &gt; 0.5<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  A
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul> <div class="custom-block tip"><p class="custom-block-title">$if vs $show</p> <p>$if 是“真正”的条件渲染，因为它会确保在切换过程中条件块内的事件监听器和子组件适当地被销毁和重建。</p> <p>$if 也是<strong>惰性的</strong>：如果在初始渲染时条件为假，则什么也不做——直到条件第一次变为真时，才会开始渲染条件块。</p> <p>相比之下，$show 就简单得多——不管初始条件是什么，元素总是会被渲染，并且只是简单地基于 CSS 进行切换。</p> <p>一般来说，$if 有更高的切换开销，而 $show 有更高的初始渲染开销。因此，如果需要非常频繁地切换，则使用 $show 较好；如果在运行时条件很少改变，则使用 $if 较好。</p></div> <h3 id="bind"><a href="#bind" class="header-anchor">#</a> $bind</h3> <ul><li><p><strong>类型</strong>：<code>Object</code></p></li> <li><p><strong>用法</strong>：</p> <p>动态地绑定一个对象，将对象的键值对作为 DOM 元素的属性或传递给组件的 prop。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 绑定一个对象 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-component</span> <span class="token attr-name">$bind</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>object<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-component</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 绑定一个内联对象 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">$bind</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ id: someProp, <span class="token punctuation">'</span>other-attr<span class="token punctuation">'</span>: otherProp }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>在绑定 <code>class</code> 或 <code>style</code> 时，支持其它类型的值，如数组或对象。参考<a href="/docs/template.html#class-与-style">class 与 style</a>。</p> <p>在绑定到 DOM 元素时，默认会通过 <code>in</code> 操作检测该 DOM 元素的 property 是否有这个键。如果有，就将这个值设置为一个 DOM property 而不是 attribute。大多数情况下，这样工作是正常的，但你也可以通过 <code>.prop</code> 或 <code>.attr</code> 修饰符显性地覆写这个行为。</p> <p>如果绑定的对象中包含已存在的属性，那么绑定的<strong>声明顺序</strong>将决定它们如何被合并。开发者能够对自己所希望的合并行为做更好的控制:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 模板 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>red<span class="token punctuation">&quot;</span></span> <span class="token attr-name">$bind</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ id: <span class="token punctuation">'</span>blue<span class="token punctuation">'</span> }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 结果 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>blue<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 模板 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">$bind</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ id: <span class="token punctuation">'</span>blue<span class="token punctuation">'</span> }<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>red<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 结果 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>red<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul> <h3 id="model"><a href="#model" class="header-anchor">#</a> $model</h3> <ul><li><p><strong>预期</strong>：<code>data</code> 的字段或<code>$store</code>的数据。</p></li> <li><p><strong>限制</strong>：</p> <ul><li><code>&lt;input&gt;</code></li> <li><code>&lt;select&gt;</code></li> <li><code>&lt;textarea&gt;</code></li> <li>components</li></ul></li> <li><p><strong>用法</strong>：</p> <p>在表单控件或者组件上创建双向绑定。绑定的字段的数据类型，随表单控件类型不同而不同。</p> <p><strong>文本</strong>或<strong>多行文本</strong>，绑定类型为字符串：</p> <div data-info="mydemo%20%5Bparser%5D%20%5Bheight%3D120%5D" data-type="parser" class="docs-demo-plugin__wrapper"><div class="docs-demo-plugin__code"><div class="language-js extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><br><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-js"><code>toolkit<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  template<span class="token operator">:</span>
    <span class="token string">'&lt;input $model=&quot;message&quot;&gt;\
    &lt;p&gt;{{ message }}&lt;/p&gt;'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      message<span class="token operator">:</span> <span class="token string">&quot;输入一些东西&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  el<span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <div class="docs-demo-plugin__display"><div class="docs-demo-plugin__app"></div></div></div><p>单个<strong>复选框</strong>，绑定类型为布尔值：</p> <div data-info="mydemo%20%5Bparser%5D%20%5Bheight%3D100%5D" data-type="parser" class="docs-demo-plugin__wrapper"><div class="docs-demo-plugin__code"><div class="language-js extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><br><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-js"><code>toolkit<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  template<span class="token operator">:</span>
    <span class="token string">'&lt;input type=&quot;checkbox&quot; id=&quot;checkbox&quot; $model=&quot;checked&quot;&gt;\
    &lt;label for=&quot;checkbox&quot;&gt;{{ checked }}&lt;/label&gt;'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      checked<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  el<span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <div class="docs-demo-plugin__display"><div class="docs-demo-plugin__app"></div></div></div><p>多个<strong>复选框</strong>，绑定到数组，数组项的内容为复选框 value 值，值可以是静态字符串，也可以是动态绑定的对象等类型：</p> <div data-info="mydemo%20%5Bparser%5D%20%5Bheight%3D100%5D" data-type="parser" class="docs-demo-plugin__wrapper"><div class="docs-demo-plugin__code"><div class="language-js extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><div class="highlighted"> </div><br><br><div class="highlighted"> </div><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-js"><code>toolkit<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  template<span class="token operator">:</span>
    <span class="token string">'&lt;label for=&quot;jack&quot;&gt;\
      &lt;input type=&quot;checkbox&quot; id=&quot;jack&quot; value=&quot;Jack&quot; $model=&quot;checkedNames&quot;&gt;Jack\
    &lt;/label&gt;\
    &lt;label for=&quot;john&quot;&gt;\
      &lt;input type=&quot;checkbox&quot; id=&quot;john&quot; value=&quot;John&quot; $model=&quot;checkedNames&quot;&gt;John\
    &lt;/label&gt;\
    &lt;label for=&quot;mike&quot;&gt;\
      &lt;input type=&quot;checkbox&quot; id=&quot;mike&quot; value=&quot;Mike&quot; $model=&quot;checkedNames&quot;&gt;Mike\
    &lt;/label&gt;\
    &lt;br&gt;\
    &lt;span&gt;Checked names: {{ checkedNames }}&lt;/span&gt;'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      checkedNames<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;John&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  el<span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <div class="docs-demo-plugin__display"><div class="docs-demo-plugin__app"></div></div></div><p><strong>单选按钮</strong>，绑定类型根据单选按钮的 value 值，值可以是静态字符串，也可以是动态绑定的对象等类型：</p> <div data-info="mydemo%20%5Bparser%5D%20%5Bheight%3D110%5D" data-type="parser" class="docs-demo-plugin__wrapper"><div class="docs-demo-plugin__code"><div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><div class="highlighted"> </div><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br></div><pre class="language-js"><code>toolkit<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  template<span class="token operator">:</span>
    <span class="token string">'&lt;div&gt;\
      &lt;label for=&quot;one&quot;&gt;\
        &lt;input type=&quot;radio&quot; id=&quot;one&quot; :value=&quot;a&quot; $model=&quot;picked&quot;&gt;One\
      &lt;/label&gt;\
      &lt;br&gt;\
      &lt;label for=&quot;two&quot;&gt;\
        &lt;input type=&quot;radio&quot; id=&quot;two&quot; value=&quot;Two&quot; $model=&quot;picked&quot;&gt;Two\
      &lt;/label&gt;\
      &lt;br&gt;\
      &lt;span&gt;Picked: {{ picked }}&lt;/span&gt;\
    &lt;/div&gt;'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      picked<span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
      a<span class="token operator">:</span><span class="token punctuation">{</span>a<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  el<span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <div class="docs-demo-plugin__display"><div class="docs-demo-plugin__app"></div></div></div><p>单选<strong>选择框</strong>，绑定类型根据 option 的 value 值，值可以是静态字符串，也可以是动态绑定的对象等类型：</p> <div data-info="mydemo%20%5Bparser%5D%20%5Bheight%3D100%5D" data-type="parser" class="docs-demo-plugin__wrapper"><div class="docs-demo-plugin__code"><div class="language-js extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br></div><pre class="language-js"><code>toolkit<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  template<span class="token operator">:</span>
    <span class="token string">'&lt;div&gt;\
      &lt;select $model=&quot;selected&quot;&gt;\
        &lt;option $for=&quot;option in options&quot; :value=&quot;option.value&quot;&gt;\
          {{ option.text }}\
        &lt;/option&gt;\
      &lt;/select&gt;\
      &lt;span&gt;Selected: {{ selected }}&lt;/span&gt;\
    &lt;/div&gt;'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      selected<span class="token operator">:</span> <span class="token string">'A'</span><span class="token punctuation">,</span>
      options<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> text<span class="token operator">:</span> <span class="token string">'One'</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token string">'A'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> text<span class="token operator">:</span> <span class="token string">'Two'</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token punctuation">{</span> b<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> text<span class="token operator">:</span> <span class="token string">'Three'</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token string">'C'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  el<span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <div class="docs-demo-plugin__display"><div class="docs-demo-plugin__app"></div></div></div><p>多选<strong>选择框</strong>，绑定到数组，数组项的内容为 option 的 value 值，值可以是静态字符串，也可以是动态绑定的对象等类型：</p> <div data-info="mydemo%20%5Bparser%5D%20%5Bheight%3D150%5D" data-type="parser" class="docs-demo-plugin__wrapper"><div class="docs-demo-plugin__code"><div class="language-js extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br></div><pre class="language-js"><code>toolkit<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  template<span class="token operator">:</span>
    <span class="token string">'&lt;div&gt;\
      &lt;select $model=&quot;selecteds&quot; multiple style=&quot;width: 50px;&quot;&gt;\
        &lt;option $for=&quot;option in options&quot; :value=&quot;option.value&quot;&gt;\
          {{ option.text }}\
        &lt;/option&gt;\
      &lt;/select&gt;\
      &lt;br&gt;\
      &lt;span&gt;Selected: {{ selecteds }}&lt;/span&gt;\
    &lt;/div&gt;'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      selecteds<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      options<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> text<span class="token operator">:</span> <span class="token string">'One'</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token string">'A'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> text<span class="token operator">:</span> <span class="token string">'Two'</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token punctuation">{</span> b<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> text<span class="token operator">:</span> <span class="token string">'Three'</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token string">'C'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  el<span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <div class="docs-demo-plugin__display"><div class="docs-demo-plugin__app"></div></div></div></li> <li><p><strong>在组件上使用</strong>：</p> <p>可通过 prop 及自定义事件来创建支持 <code>$model</code> 指令的组件。</p> <p>默认情况下，子组件上的 <code>$model</code> 指令会使用 <code>modelValue</code> 作为 prop 和 <code>update:modelValue</code> 作为事件传入子组件。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>customInput</span> <span class="token attr-name">$model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bookTitle<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>customInput</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 相当于 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>customInput</span> <span class="token attr-name">:modelValue</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bookTitle<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">@update:</span>modelValue</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>value =&gt; $setData(<span class="token punctuation">'</span>bookTitle<span class="token punctuation">'</span>, value)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>customInput</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>在上例中，组件 <code>&lt;customInput&gt;</code> 将需要定义一个 <code>modelValue</code> prop 并发出 <code>update:modelValue</code> 事件。</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><div class="highlighted"> </div><br><br><div class="highlighted"> </div><br><div class="highlighted"> </div><br><br><br></div><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">customInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    template<span class="token operator">:</span>
      <span class="token string">'&lt;input\
        type=&quot;text&quot;\
        :value=&quot;modelValue&quot;\
        @input=`$emit(&quot;update:modelValue&quot;, $event.target.value)`\
      &gt;'</span><span class="token punctuation">,</span>
    props<span class="token operator">:</span> <span class="token punctuation">{</span>
      modelValue<span class="token operator">:</span> String
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    emits<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'update:modelValue'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>我们也可以通过向 <code>$model</code> 指令传递参数来修改 prop 及事件的名称：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>customInput</span> <span class="token attr-name"><span class="token namespace">$model:</span>title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bookTitle<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>customInput</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 相当于 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>customInput</span> <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bookTitle<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">@update:</span>title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>value =&gt; $setData(<span class="token punctuation">'</span>bookTitle<span class="token punctuation">'</span>, value)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>customInput</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>在上例中，组件 <code>&lt;customInput&gt;</code> 将需要定义一个 <code>title</code> prop 并发出 <code>update:title</code> 事件。</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><div class="highlighted"> </div><br><br><div class="highlighted"> </div><br><div class="highlighted"> </div><br><br><br></div><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">customInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    template<span class="token operator">:</span>
      <span class="token string">'&lt;input\
        type=&quot;text&quot;\
        :value=&quot;title&quot;\
        @input=`$emit(&quot;update:title&quot;, $event.target.value)`\
      &gt;'</span><span class="token punctuation">,</span>
    props<span class="token operator">:</span> <span class="token punctuation">{</span>
      title<span class="token operator">:</span> String
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    emits<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'update:title'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>由于 <code>$model</code> 指令通过接收参数可以与特定的 prop 和事件关联，所以可以在单个子组件上使用多个 <code>$model</code> 绑定。每个 <code>$model</code> 将同步到不同的 prop：</p> <div data-info="mydemo%20%5Bparser%5D%20%5Bheight%3D200%5D" data-type="parser" class="docs-demo-plugin__wrapper"><div class="docs-demo-plugin__code"><div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-js"><code>toolkit<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  template<span class="token operator">:</span>
    <span class="token string">'&lt;div&gt;title：{{ title }}&lt;/div&gt;\
    &lt;div&gt;message：{{ message }}&lt;/div&gt;\
    &lt;hr/&gt;\
    &lt;ModelExample $model:title=&quot;title&quot; $model:msg=&quot;message&quot;&gt;&lt;/ModelExample&gt;'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token string">&quot;title&quot;</span><span class="token punctuation">,</span>
      message<span class="token operator">:</span> <span class="token string">&quot;message&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span>
    ModelExample<span class="token operator">:</span> ModelExample
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  el<span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">ModelExample</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    template<span class="token operator">:</span>
      <span class="token string">'&lt;div&gt;ModelExample&lt;/div&gt;\
      &lt;div&gt;{{ title }}&lt;/div&gt;\
      &lt;div&gt;{{ msg }}&lt;/div&gt;\
      &lt;button @click=&quot;upper&quot;&gt;转大写&lt;/button&gt;'</span><span class="token punctuation">,</span>
    props<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;title&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    emits<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;update:msg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;update:title&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    methods<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function-variable function">upper</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&quot;update:msg&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>msg<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&quot;update:title&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>title<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <div class="docs-demo-plugin__display"><div class="docs-demo-plugin__app"></div></div></div></li></ul> <h3 id="ref"><a href="#ref" class="header-anchor">#</a> $ref</h3> <ul><li><p><strong>类型</strong>：<code>string</code></p></li> <li><p><strong>用法</strong>：</p> <p><code>$ref</code> 被用来给元素或子组件注册引用信息。引用信息将会注册在组件实例的 <code>$refs</code> 对象上。如果在普通的 DOM 元素上使用，引用指向的就是 DOM 元素；如果用在子组件上，引用就指向组件实例。</p> <p>当 <code>$for</code> 用于元素或组件的时候，引用信息将是包含 DOM 元素或组件实例的数组。</p> <p>因为 ref 本身是作为渲染结果被创建的，所以在初始渲染的时候你不能访问它们 - 它们还不存在！你可以在 <code>mounted</code>、<code>updated</code> 钩子或事件处理函数中访问。</p> <div data-info="mydemo%20%5Bparser%5D%20%5Bhorizontal%5D%20%5Bheight%3D280%5D%20%5Bvconsole%5D" data-type="parser" class="docs-demo-plugin__wrapper"><div class="docs-demo-plugin__code"><div class="language-js extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-js"><code>toolkit<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  template<span class="token operator">:</span>
    <span class="token string">'&lt;ul $ref=&quot;my_ul&quot;&gt;\
      &lt;li $ref=&quot;my_lis&quot; $for=&quot;item in items&quot;&gt;\
        {{ item.message }}\
      &lt;/li&gt;\
    &lt;/ul&gt;'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      items<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">'Foo'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">'Bar'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">mounted</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;my_ul 是一个 ul 元素&quot;</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>my_ul<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;my_lis 由于使用 $for 指令，所以是一个数组，内含多个 li 元素&quot;</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>my_lis<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  el<span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <div class="docs-demo-plugin__display"><div class="docs-demo-plugin__app"></div></div></div></li></ul> <h3 id="allow-html"><a href="#allow-html" class="header-anchor">#</a> $allow-html</h3> <ul><li><p><strong>不需要表达式</strong></p></li> <li><p><strong>用法</strong>：</p> <p>允许 DOM 元素插入 html 内容。<strong>注意：内容按普通 HTML 插入 - 不会作为模板进行编译</strong>。</p> <p>在网站上动态渲染任意 HTML 是非常危险的，因为容易导致 XSS 攻击。只在可信内容上使用 $allow-html，永不用在用户提交的内容上。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">$allow-html</span><span class="token punctuation">&gt;</span></span>{{ htmlContent }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul> <h3 id="once"><a href="#once" class="header-anchor">#</a> $once</h3> <ul><li><p><strong>不需要表达式</strong></p></li> <li><p><strong>用法</strong>：</p> <p>只渲染元素和组件<strong>一次</strong>。随后的重新渲染，元素/组件及其所有的子节点将被视为静态内容并跳过。这可以用于优化更新性能。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 单个元素 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">$once</span><span class="token punctuation">&gt;</span></span>This will never change: {{msg}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 有子元素 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">$once</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>comment<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{msg}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 组件 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-component</span> <span class="token attr-name">$once</span> <span class="token attr-name">:comment</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>msg<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-component</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- `$for` 指令--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">$for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i in list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">$once</span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>i<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>{{i}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul> <h2 id="特殊属性"><a href="#特殊属性" class="header-anchor">#</a> 特殊属性</h2> <h3 id="key"><a href="#key" class="header-anchor">#</a> key</h3> <ul><li><p><strong>类型</strong>：<code>number | string</code></p></li> <li><p><strong>详细</strong>：</p> <p>key 用于虚拟 DOM 算法在对比新旧节点树时辨识节点的身份。这样就可以知道何时能够重用和修补现有节点，以及何时需要对它们重新排序或重新创建。</p> <p>如果不使用 key，会寻找相同类型的节点元素进行复用，并更新节点元素的属性，然后再进一步对比它们子节点。当找不到可复用的节点元素时就会创建该元素。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 新节点 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>div_1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>div_2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 旧节点 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>div_3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>div_4<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>以上示例在不使用 key 时的更新过程：</p> <ol><li>新节点的 div_1 与旧节点的 div_3 是相同类型的元素，所以会直接复用旧节点的 div_3 元素，并更新 id 属性。</li> <li>对比 div_1 和 div_3 的子节点，由于它们的子节点是不同类型的元素，所以会删除 div_3 的 a 元素，并创建 div_1 的 ul 及 li 元素。</li> <li>div_2 和 div_4 的更新过程同上。</li></ol> <p>如果使用 key，就会寻找 key 相同且相同类型的节点元素进行复用。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 新节点 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>div_1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>div_2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 旧节点 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>div_3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>div_4<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>以上示例在加上 key 后的更新过程：</p> <ol><li>新节点的 div_1 与旧节点的 div_4 由于 key 相同且是相同类型的元素，所以会直接复用旧节点 div_4 元素，并更新 id 属性。</li> <li>对比 div_1 和 div_4 的子节点，由于子节点是相同类型的元素，会直接复用。</li> <li>div_2 和 div_3 的更新过程同上。</li></ol> <div class="custom-block warning"><p class="custom-block-title">注意：</p> <p>有相同父元素的子元素必须有<strong>独特的 key</strong>。重复的 key 会造成渲染错误。</p></div> <p>最常见的用例是结合 $for 指令：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">$for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item in items<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>由于 key 不相同时，就不会复用元素，所以也可以用于强制替换元素。当你遇到如下场景时它可能会很有用：</p> <ul><li>完整地触发组件的生命周期钩子</li> <li>触发过渡</li></ul></li></ul> <h2 id="事件绑定"><a href="#事件绑定" class="header-anchor">#</a> 事件绑定</h2> <p>在绑定事件时，对于可以冒泡的事件，会采用<strong>事件委托</strong>方式进行绑定，这些事件会绑定在组件的挂载元素上。</p> <h3 id="事件绑定符"><a href="#事件绑定符" class="header-anchor">#</a> 事件绑定符 “@”</h3> <ul><li><p><strong>类型</strong>：<code>Function</code></p></li> <li><p><strong>修饰符</strong>：</p> <ul><li><code>.stop</code> - 调用 <code>event.stopPropagation()</code>。</li> <li><code>.prevent</code> - 调用 <code>event.preventDefault()</code>。</li> <li><code>.capture</code> - 添加事件侦听器时使用 capture 模式。</li> <li><code>.self</code> - 只当事件是从侦听器绑定的元素本身触发时才触发回调。</li> <li><code>.once</code> - 只触发一次回调。</li> <li><code>.passive</code> - 以 <code>{ passive: true }</code> 模式添加侦听器。</li> <li><code>.ime</code> - 在 <code>input</code> 输入框或 <code>textarea</code> 监听 <code>input</code> 事件时，不会在输入法组合文字过程中触发。</li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>由于 IE 8 不支持捕获阶段的事件，所以在使用 .capture 修饰符时，针对 IE8 浏览器会模拟捕获阶段。</p> <p>对于不支持 passive 模式的浏览器，会忽略 .passive 修饰符。</p></div></li> <li><p><strong>详细</strong>：</p> <p>使用事件绑定符 “@”，可以监听元素的 <strong>DOM 事件</strong>或子组件的<strong>自定义事件</strong>，并在事件触发时执行绑定的监听器函数。</p> <p>在监听元素的 <strong>DOM 事件</strong>时，监听器函数接收<strong>事件对象</strong>作为参数。如果使用内联语句，语句可以使用 <code>$event</code> 访问事件对象：<code>@click=&quot;handle('ok', $event)&quot;</code>。</p> <p>在监听子组件的<strong>自定义事件</strong>时，监听器函数接收子组件在调用 <code>$emit</code> 时传递的参数。如果使用内联语句，语句可以使用 <code>$args</code> 访问由这些参数组成的数组：<code>@some_event=&quot;handle('ok', $args)&quot;</code>，也可以使用箭头函数的参数列表访问这些参数：<code>@some_event=&quot;(argA, argB)=&gt;handle('ok', argA, argB)&quot;</code>。</p></li> <li><p><strong>示例</strong>：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>doThis<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 内联语句 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>doThis(123, $event)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 内联语句 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(e)=&gt;doThis(123, e)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 停止冒泡 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click.stop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>doThis<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 阻止默认行为 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click.prevent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>doThis<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--  串联修饰符 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click.stop.prevent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>doThis<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 点击回调只会触发一次 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click.once</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>doThis<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>在子组件上监听自定义事件 (当子组件触发“my-event”时将调用事件处理器)：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-component</span> <span class="token attr-name">@my-event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleThis<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-component</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 内联语句 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-component</span> <span class="token attr-name">@my-event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleThis(123, $args)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-component</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 内联语句 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-component</span> <span class="token attr-name">@my-event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(something)=&gt;handleThis(123, something)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-component</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul> <h3 id="箭头函数"><a href="#箭头函数" class="header-anchor">#</a> 箭头函数</h3> <p>在 ES6 标准中新增了一种新的函数：Arrow Function（箭头函数）。语法如下：</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><br><div class="highlighted"> </div><br><br><br><div class="highlighted"> </div><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br><div class="highlighted"> </div><br></div><pre class="language-js"><code><span class="token comment">// 无参数时，参数位置必须使用 () 括号。</span>
<span class="token keyword">var</span> <span class="token function-variable function">fn1</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token keyword">var</span> <span class="token function-variable function">fn1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token comment">// 单个参数时，参数位置可省略 () 括号。</span>
<span class="token keyword">var</span> <span class="token function-variable function">fn2</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token keyword">var</span> <span class="token function-variable function">fn2</span> <span class="token operator">=</span> <span class="token parameter">a</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token comment">// 多个参数时，参数位置必须使用 () 括号。</span>
<span class="token keyword">var</span> <span class="token function-variable function">fn3</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token keyword">var</span> <span class="token function-variable function">fn3</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

<span class="token comment">// 函数只包含一条语句时，函数体可省略 {} 括号和 return。</span>
<span class="token keyword">var</span> <span class="token function-variable function">fn4</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> a <span class="token operator">+</span> b <span class="token punctuation">}</span>
<span class="token keyword">var</span> <span class="token function-variable function">fn4</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">+</span> b

<span class="token comment">// 函数包含多条语句时，函数体不能省略 {} 括号和 return。</span>
<span class="token keyword">var</span> <span class="token function-variable function">fn5</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> c <span class="token operator">=</span> a <span class="token operator">*</span> <span class="token number">2</span>
  <span class="token keyword">return</span> a <span class="token operator">+</span> b <span class="token operator">+</span> c
<span class="token punctuation">}</span>
<span class="token keyword">var</span> <span class="token function-variable function">fn5</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
  <span class="token keyword">var</span> c <span class="token operator">=</span> a <span class="token operator">*</span> <span class="token number">2</span>
  <span class="token keyword">return</span> a <span class="token operator">+</span> b <span class="token operator">+</span> c
<span class="token punctuation">}</span>

<span class="token comment">// 函数返回一个对象直接量时，因为和函数体的 {} 有语法冲突，</span>
<span class="token comment">// 所以如果要使用简写语法，必须使用 () 括号包裹对象直接量。</span>
<span class="token keyword">var</span> <span class="token function-variable function">fn6</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token keyword">var</span> <span class="token function-variable function">fn6</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>在模板中绑定事件时，可以使用箭头函数，箭头函数内部的 <code>this</code> 指向组件实例对象。</p> <div data-info="mydemo%20%5Bparser%5D%20%5Bheight%3D100%5D" data-type="parser" class="docs-demo-plugin__wrapper"><div class="docs-demo-plugin__code"><div class="language-js extra-class"><pre class="language-js"><code>  toolkit<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    template<span class="token operator">:</span>
      <span class="token string">'&lt;div @click=`()=&gt;$setData(&quot;number&quot;,Math.random())`&gt;点击变更：{{ number }}&lt;/div&gt;'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        number<span class="token operator">:</span> <span class="token number">0</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    el<span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <div class="docs-demo-plugin__display"><div class="docs-demo-plugin__app"></div></div></div><h2 id="内置元素"><a href="#内置元素" class="header-anchor">#</a> 内置元素</h2> <h3 id="block"><a href="#block" class="header-anchor">#</a> block</h3> <ul><li><p><strong>用法</strong>：</p> <p><code>&lt;block&gt;</code> 用于元素的分组，多数情况下与 <code>$if</code>、<code>$for</code> 等指令配合使用。它是一个抽象元素，不会额外渲染 DOM 元素。</p> <div data-info="mydemo%20%5Bparser%5D%20%5Bheight%3D130%5D" data-type="parser" class="docs-demo-plugin__wrapper"><div class="docs-demo-plugin__code"><div class="language-js extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-js"><code>toolkit<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  template<span class="token operator">:</span>
    <span class="token string">'&lt;button @click=&quot;toggle&quot;&gt;切换&lt;/button&gt;\
    &lt;block $if=&quot;showFirstGroup&quot;&gt;\
      &lt;div&gt;A&lt;/div&gt;\
      &lt;div&gt;B&lt;/div&gt;\
      &lt;div&gt;C&lt;/div&gt;\
    &lt;/block&gt;\
    &lt;block $else $for=&quot;n in 2&quot;&gt;\
      &lt;div&gt;{{ n*1 }}&lt;/div&gt;\
      &lt;div&gt;{{ n*2 }}&lt;/div&gt;\
      &lt;div&gt;{{ n*3 }}&lt;/div&gt;\
    &lt;/block&gt;'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      showFirstGroup<span class="token operator">:</span><span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token function">toggle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$setData</span><span class="token punctuation">(</span><span class="token string">&quot;showFirstGroup&quot;</span><span class="token punctuation">,</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>showFirstGroup<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  el<span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <div class="docs-demo-plugin__display"><div class="docs-demo-plugin__app"></div></div></div></li></ul> <h3 id="slot"><a href="#slot" class="header-anchor">#</a> slot</h3> <ul><li><p><strong>属性</strong>：</p> <ul><li><code>name</code> - string，用于命名插槽。</li></ul></li> <li><p><strong>用法</strong>：</p> <p><code>&lt;slot&gt;</code> 元素作为组件的插槽，用于承载组件的内容，在组件渲染时，它会被组件的内容替换。</p> <hr> <p><strong>组件内容：</strong></p> <p>假设有一个 <code>&lt;navigation-link&gt;</code> 组件，template 模板为：</p> <div class="language-html extra-class"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br></div><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">:href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nav-link<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>你可以像这样使用组件：</p> <div class="language-html extra-class"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br></div><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>navigation-link</span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/profile<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  Your Profile
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>navigation-link</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>当组件渲染的时候，<code>&lt;slot&gt;&lt;/slot&gt;</code> 将会被替换为“Your Profile”。</p> <p>组件内容可以包含任何模板代码，包括 HTML：</p> <div class="language-html extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br></div><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>navigation-link</span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/profile<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 添加一个 Font Awesome 图标 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fa fa-user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  Your Profile
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>navigation-link</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>甚至其它的组件：</p> <div class="language-html extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br></div><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>navigation-link</span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/profile<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 添加一个图标的组件 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>font-awesome-icon</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>font-awesome-icon</span><span class="token punctuation">&gt;</span></span>
  Your Profile
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>navigation-link</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>如果 <code>&lt;navigation-link&gt;</code> 的 template 中没有 <code>&lt;slot&gt;</code> 元素，则该组件的所有内容都会被抛弃。</p> <p><strong>编译作用域：</strong></p> <p>每个模板都是在独立的作用域中编译，所以组件内容跟模板的其它地方一样，可以访问到同一个作用域的数据，但不能访问组件 <code>&lt;navigation-link&gt;</code> 的作用域的数据。</p> <p>例如 <code>&lt;navigation-link&gt;</code> 的 props 的 url 属性是访问不到的：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>navigation-link</span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/profile<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  Clicking here will send you to: {{ url }}
  <span class="token comment">&lt;!--
  组件内容的 `url` 会是 undefined，因为组件内容是
  传递给 &lt;navigation-link&gt; 的，而不是
  在 &lt;navigation-link&gt; 组件*内部*定义的。
  --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>navigation-link</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>备用内容：</strong></p> <p>可以为插槽设置备用内容，当没有组件内容传入插槽时，备用内容会被渲染。例如：带有如下模板的 <code>&lt;submit-button&gt;</code> 组件：</p> <div class="language-html extra-class"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br></div><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">&gt;</span></span>Submit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>现在当在一个父级组件中使用 <code>&lt;submit-button&gt;</code> 并且没有组件内容传入插槽时：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>submit-button</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>submit-button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>备用内容“Submit”将会被渲染：</p> <div class="language-html extra-class"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br></div><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  Submit
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>具名插槽：</strong></p> <p>有时我们需要多个插槽。对于这样的情况，<code>&lt;slot&gt;</code> 元素有一个特殊的属性：<code>name</code>。这个属性可以为插槽命名，从而定义额外的插槽。</p> <p>例如对于一个带有如下模板的 <code>&lt;base-layout&gt;</code> 组件：</p> <div class="language-html extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><div class="highlighted"> </div><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>footer</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>footer</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>不带 <code>name</code> 属性的 <code>&lt;slot&gt;</code> 插槽，它的默认名称为 <code>default</code>。</p> <p>在向组件提供内容的时候，我们可以在内容元素上使用 “#” + 插槽名称，来为内容指定其所属的插槽：</p> <div class="language-html extra-class"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br><div class="highlighted"> </div><br><br><div class="highlighted"> </div><br><br></div><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>base-layout</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">#header</span><span class="token punctuation">&gt;</span></span>Header<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Main Content<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">#default</span><span class="token punctuation">&gt;</span></span>Main Content 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  Main Content 3

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">#footer</span><span class="token punctuation">&gt;</span></span>Footer<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>base-layout</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>现在组件中的所有内容都将会被传入相应的插槽。任何没有指定插槽名称的内容都会被传入名称为 <code>default</code> 的插槽。</p> <p>当内容是没有元素包裹的文本内容时，可以使用 <a href="/docs/template.html#block">block</a> 元素包裹来指定插槽名称：</p> <div class="language-html extra-class"><div class="highlight-lines"><br><br><br><br><br><div class="highlighted"> </div><br><br><div class="highlighted"> </div><br><br></div><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>base-layout</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">#header</span><span class="token punctuation">&gt;</span></span>Header<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Main Content<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">#default</span><span class="token punctuation">&gt;</span></span>Main Content 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name">#default</span><span class="token punctuation">&gt;</span></span>Main Content 3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">#footer</span><span class="token punctuation">&gt;</span></span>Footer<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name">#footer</span><span class="token punctuation">&gt;</span></span>Footer 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>base-layout</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>作用域插槽：</strong></p> <p>有时让组件内容能够访问组件作用域中才有的数据是很有用的。例如，设想一个带有如下模板的 <code>&lt;current-user&gt;</code> 组件：</p> <div class="language-html extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{ user.lastName }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>组件默认会使用备用内容 lastName 来显示。</p> <p>当我们使用这个组件，想用 firstName 而非 lastName 来显示时。如下：</p> <div class="language-html extra-class"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br></div><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>current-user</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{ user.firstName }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>current-user</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>然而上述代码<strong>不会</strong>正常工作，因为 <code>user</code> 存在于 <code>&lt;current-user&gt;</code> 组件的作用域，而我们提供的组件内容是在父级作用域渲染的。</p> <p>为了让 <code>user</code> 在父级的内容中可用，我们可以将 <code>user</code> 作为 <code>&lt;slot&gt;</code> 元素的一个属性绑定上去：</p> <div class="language-html extra-class"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">:user</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{ user.lastName }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>绑定在 <code>&lt;slot&gt;</code> 元素上的属性被称为<strong>插槽 prop</strong>。现在在父级作用域中，我们可以通过指定插槽名称并带上插槽 prop 的名字来访问 <code>user</code>：</p> <div class="language-html extra-class"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br></div><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>current-user</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">#default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ user.firstName }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>current-user</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>当<code>&lt;slot&gt;</code> 元素绑定了多个属性时，要访问多个插槽 prop，使用 <strong>“,”</strong> 分隔</p> <div class="language-html extra-class"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br><br><br><br><div class="highlighted"> </div><br><br></div><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">:user</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:other</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>other<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{ user.lastName }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>current-user</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">#default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user,other<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ user.firstName }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>current-user</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ul> <h3 id="transition"><a href="#transition" class="header-anchor">#</a> transition</h3> <ul><li><p><strong>属性</strong>：</p> <ul><li><code>name</code> - string，用于自动生成 CSS 过渡类名。例如：name: 'fade' 将自动拓展为 .fade-enter，.fade-enter-active 等。默认类名为 &quot;transition&quot;。</li> <li><code>appear</code> - boolean，是否在初始渲染时使用过渡。默认为 false。</li> <li><code>css</code> - boolean，是否使用 CSS 过渡类。默认为 true。如果设置为 false，将只触发注册的钩子事件。</li> <li><code>type</code> - string，指定过渡事件类型，侦听过渡何时结束。有效值为 &quot;transition&quot; 和 &quot;animation&quot;。默认会自动检测出持续时间长的为过渡事件类型。</li> <li><code>mode</code> - string，控制离开/进入过渡的时间序列。有效的模式有 &quot;out-in&quot; 和 &quot;in-out&quot;；默认同时进行。</li> <li><code>duration</code> - number | { enter: number, leave: number } 指定过渡的持续时间。默认情况下，会等待过渡所在根元素的第一个 transitionend 或 animationend 事件。</li> <li><code>enter-class</code> - string</li> <li><code>enter-active-class</code> - string</li> <li><code>enter-to-class</code> - string</li> <li><code>leave-class</code> - string</li> <li><code>leave-active-class</code> - string</li> <li><code>leave-to-class</code> - string</li> <li><code>appear-class</code> - string</li> <li><code>appear-active-class</code> - string</li> <li><code>appear-to-class</code> - string</li> <li><code>move</code> - boolean，是否在元素改变位置时使用过渡。默认为 false。</li> <li><code>move-class</code> - string</li></ul></li> <li><p><strong>钩子事件</strong>：</p> <ul><li><code>before-enter (element)</code> - Function</li> <li><code>enter (element, done)</code> - Function</li> <li><code>after-enter (element)</code> - Function</li> <li><code>enter-cancelled (element)</code> - Function</li> <li><code>before-leave (element)</code> - Function</li> <li><code>leave (element, done)</code> - Function</li> <li><code>after-leave (element)</code> - Function</li> <li><code>leave-cancelled (element)</code> - Function</li> <li><code>before-appear (element)</code> - Function</li> <li><code>appear (element, done)</code> - Function</li> <li><code>after-appear (element)</code> - Function</li> <li><code>appear-cancelled (element)</code> - Function</li></ul></li> <li><p><strong>用法</strong>：</p> <p><code>&lt;transition&gt;</code> 用于为被它包裹的内容添加过渡效果。它是一个抽象元素，不会额外渲染 DOM 元素。</p> <div class="custom-block warning"><p class="custom-block-title">注意</p> <p>由于 IE8 性能较差，且不支持 CSS 过渡/动画，所以在 IE8 下 <code>&lt;transition&gt;</code> 会被编译为 <a href="/docs/template.html#block"><code>&lt;block&gt;</code></a>。</p></div> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><code>&lt;transition&gt;</code> 整合了 Vue 的 <code>&lt;transition&gt;</code> 及 <code>&lt;transition-group&gt;</code> 的功能，能支持列表元素的切换及 mode 模式，并可同时使用列表排序过渡。</p></div> <hr> <p>被 <code>&lt;transition&gt;</code> 包裹的内容，在插入或删除时，会做以下处理：</p> <ol><li><p>如果应用了 CSS 过渡/动画，会在恰当的时机添加/删除 CSS 类名。</p></li> <li><p>如果提供了钩子事件函数，这些钩子事件函数将在恰当的时机被调用。</p></li> <li><p>如果没有提供钩子事件函数并且也没有应用 CSS 过渡/动画，DOM 操作 (插入/删除) 会在下一帧中立即执行。</p></li> <li><p>当包裹的内容是组件时，过渡效果会作用于组件的根元素。</p></li></ol> <div class="custom-block warning"><p class="custom-block-title">注意</p> <p>必须为 <code>&lt;transition&gt;</code> 中的元素提供唯一的 <code>key</code> 值，以便明确地区分它们。对于带有 <code>$if</code>/<code>$else-if</code>/<code>$else</code> 指令的元素，可以不设置，因为这些指令会自动生成 <code>key</code> 值。</p></div> <p><strong>用于 CSS 过渡/动画的类名：</strong></p> <p>在进入/离开的过渡中，会有 6 个 class 切换。</p> <ol><li><p><code>transition-enter</code>：定义进入过渡的开始状态。在元素被插入之前生效，在元素被插入之后的下一帧移除。</p></li> <li><p><code>transition-enter-active</code>：定义进入过渡生效时的状态。在整个进入过渡的阶段中应用，在元素被插入之前生效，在过渡/动画完成之后移除。这个类可以被用来定义进入过渡的过程时间，延迟和曲线函数。</p></li> <li><p><code>transition-enter-to</code>：定义进入过渡的结束状态。在元素被插入之后下一帧生效 (与此同时 <code>transition-enter</code> 被移除)，在过渡/动画完成之后移除。</p></li> <li><p><code>transition-leave</code>：定义离开过渡的开始状态。在离开过渡被触发时立刻生效，下一帧被移除。</p></li> <li><p><code>transition-leave-active</code>：定义离开过渡生效时的状态。在整个离开过渡的阶段中应用，在离开过渡被触发时立刻生效，在过渡/动画完成之后移除。这个类可以被用来定义离开过渡的过程时间，延迟和曲线函数。</p></li> <li><p><code>transition-leave-to</code>：定义离开过渡的结束状态。在离开过渡被触发之后下一帧生效 (与此同时 <code>transition-leave</code> 被删除)，在过渡/动画完成之后移除。</p></li></ol> <p>如果你没有使用 <code>name</code> 属性，这些类名会使用 <code>transition</code> 作为前缀。如果你使用了 <code>&lt;transition name=&quot;fade&quot;&gt;</code>，那么 <code>transition-enter</code> 会替换为 <code>fade-enter</code>。</p> <p>还可以通过以下属性来自定义过渡类名：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span>
  <span class="token attr-name">enter-class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>my-enter<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">enter-active-class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>my-enter-active<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">enter-to-class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>my-enter-to<span class="token punctuation">&quot;</span></span>

  <span class="token attr-name">leave-class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>my-leave<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">leave-active-class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>my-leave-active<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">leave-to-class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>my-leave-to<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- ... --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>自定义类名的优先级高于默认的类名，这对于与第三方 CSS 动画库，如 Animate.css 结合使用十分有用。</p> <p><strong>CSS 过渡：</strong></p> <p>常用的过渡都是使用 CSS 过渡。</p> <p>下面是一个简单例子：</p> <div data-info="mydemo%20%5Bparser%5D%20%5Bhorizontal%5D%20%5Bheight%3D130%5D" data-type="parser" class="docs-demo-plugin__wrapper"><div class="docs-demo-plugin__code"><div class="language-js extra-class"><pre class="language-js"><code>toolkit<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  template<span class="token operator">:</span>
    <span class="token string">'&lt;div&gt;\
      &lt;button @click=`$setData(&quot;show&quot;,!show)`&gt;\
        Toggle render\
      &lt;/button&gt;\
      &lt;transition name=&quot;slide-fade&quot;&gt;\
        &lt;p $if=&quot;show&quot;&gt;hello&lt;/p&gt;\
      &lt;/transition&gt;\
    &lt;/div&gt;'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      show<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  style<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;.slide-fade-enter-active&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;transition&quot;</span><span class="token operator">:</span> <span class="token string">&quot;all .3s ease&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;.slide-fade-leave-active&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;transition&quot;</span><span class="token operator">:</span> <span class="token string">&quot;all .8s cubic-bezier(1.0, 0.5, 0.8, 1.0)&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;.slide-fade-enter, .slide-fade-leave-to&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;transform&quot;</span><span class="token operator">:</span> <span class="token string">&quot;translateX(10px)&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;opacity&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  el<span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <div class="docs-demo-plugin__display"><div class="docs-demo-plugin__app"></div></div></div><p><strong>CSS 动画：</strong></p> <p>CSS 动画用法同 CSS 过渡：</p> <div data-info="mydemo%20%5Bparser%5D%20%5Bhorizontal%5D%20%5Bheight%3D260%5D" data-type="parser" class="docs-demo-plugin__wrapper"><div class="docs-demo-plugin__code"><div class="language-js extra-class"><pre class="language-js"><code>toolkit<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  template<span class="token operator">:</span>
    <span class="token string">'&lt;div&gt;\
      &lt;button @click=`$setData(&quot;show&quot;,!show)`&gt;Toggle show&lt;/button&gt;\
      &lt;transition name=&quot;bounce&quot;&gt;\
        &lt;p $if=&quot;show&quot;&gt;\
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris facilisis enim libero, at lacinia diam fermentum id. Pellentesque habitant morbi tristique senectus et netus.\
        &lt;/p&gt;\
      &lt;/transition&gt;\
    &lt;/div&gt;'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      show<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  style<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;.bounce-enter-active&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;animation&quot;</span><span class="token operator">:</span> <span class="token string">&quot;bounce-in .5s&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;.bounce-leave-active&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;animation&quot;</span><span class="token operator">:</span> <span class="token string">&quot;bounce-in .5s reverse&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;@keyframes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;bounce-in&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;0%&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string">&quot;transform&quot;</span><span class="token operator">:</span> <span class="token string">&quot;scale(0)&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;50%&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string">&quot;transform&quot;</span><span class="token operator">:</span> <span class="token string">&quot;scale(1.5)&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;100%&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string">&quot;transform&quot;</span><span class="token operator">:</span> <span class="token string">&quot;scale(1)&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  el<span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <div class="docs-demo-plugin__display"><div class="docs-demo-plugin__app"></div></div></div><p><strong>钩子事件：</strong></p> <p>可以在属性中添加钩子事件：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span>
  <span class="token attr-name">@before-enter</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>beforeEnter<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">@enter</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>enter<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">@after-enter</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>afterEnter<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">@enter-cancelled</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>enterCancelled<span class="token punctuation">&quot;</span></span>

  <span class="token attr-name">@before-leave</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>beforeLeave<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">@leave</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>leave<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">@after-leave</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>afterLeave<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">@leave-cancelled</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>leaveCancelled<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- ... --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>methods<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// --------</span>
  <span class="token comment">// 进入中</span>
  <span class="token comment">// --------</span>
  <span class="token function-variable function">beforeEnter</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 适用于定义进入过渡的开始状态</span>
    <span class="token comment">// 在元素插入前或 `$show` 指令显示前调用</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">enter</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 适用于定义进入过渡的执行过程</span>
    <span class="token comment">// 在元素插入后或 `$show` 指令显示后调用</span>
    
    <span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 当与 CSS 结合使用时，回调函数 done 是可选的</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">afterEnter</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在进入过渡/动画完成后调用</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">enterCancelled</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在进入过渡/动画被取消后调用</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// --------</span>
  <span class="token comment">// 离开时</span>
  <span class="token comment">// --------</span>
  <span class="token function-variable function">beforeLeave</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 适用于定义离开过渡的开始状态</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">leave</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 适用于定义离开过渡的执行过程</span>
    
    <span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 当与 CSS 结合使用时，回调函数 done 是可选的</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">afterLeave</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在离开过渡/动画完成后调用</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">leaveCancelled</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在离开过渡/动画被取消后调用</span>
    <span class="token comment">// leaveCancelled 只有在 $show 指令由 false 变为 true 时会触发</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这些钩子函数可以结合 CSS 过渡/动画使用，也可以单独使用。</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>当只用钩子函数过渡的时候，在 <code>enter</code> 和 <code>leave</code> 中必须使用 <code>done</code> 进行回调。否则，它们将被同步调用，过渡会立即完成。另外，添加 <code>css</code> 属性并设置为 <code>false</code>，可以跳过 CSS 的检测，这也可以避免过渡过程中 CSS 的影响。</p></div> <div data-info="mydemo%20%5Bparser%5D%20%5Bhorizontal%5D%20%5Bheight%3D160%5D%20%5Bplugins%3D.%2Fvelocity.min.js%5D" data-type="parser" class="docs-demo-plugin__wrapper"><div class="docs-demo-plugin__code"><div class="language-js extra-class"><pre class="language-js"><code>toolkit<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  template<span class="token operator">:</span>
    <span class="token string">'&lt;div&gt;\
      &lt;button @click=`$setData(&quot;show&quot;,!show)`&gt;\
        Toggle\
      &lt;/button&gt;\
      &lt;transition\
        @before-enter=&quot;beforeEnter&quot;\
        @enter=&quot;enter&quot;\
        @leave=&quot;leave&quot;\
        :css=&quot;false&quot;\
      &gt;\
        &lt;p $if=&quot;show&quot;&gt;Demo&lt;/p&gt;\
      &lt;/transition&gt;\
    &lt;/div&gt;'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      show<span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">beforeEnter</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>opacity <span class="token operator">=</span> <span class="token number">0</span>
      el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transformOrigin <span class="token operator">=</span> <span class="token string">'left'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">enter</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">Velocity</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token punctuation">{</span> opacity<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> fontSize<span class="token operator">:</span> <span class="token string">'1.4em'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> duration<span class="token operator">:</span> <span class="token number">300</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token function">Velocity</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token punctuation">{</span> fontSize<span class="token operator">:</span> <span class="token string">'1em'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> complete<span class="token operator">:</span> done <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">leave</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">Velocity</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token punctuation">{</span> translateX<span class="token operator">:</span> <span class="token string">'15px'</span><span class="token punctuation">,</span> rotateZ<span class="token operator">:</span> <span class="token string">'50deg'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> duration<span class="token operator">:</span> <span class="token number">600</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token function">Velocity</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token punctuation">{</span> rotateZ<span class="token operator">:</span> <span class="token string">'100deg'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> loop<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token function">Velocity</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        rotateZ<span class="token operator">:</span> <span class="token string">'45deg'</span><span class="token punctuation">,</span>
        translateY<span class="token operator">:</span> <span class="token string">'30px'</span><span class="token punctuation">,</span>
        translateX<span class="token operator">:</span> <span class="token string">'30px'</span><span class="token punctuation">,</span>
        opacity<span class="token operator">:</span> <span class="token number">0</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> complete<span class="token operator">:</span> done <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  style<span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token string">&quot;p&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token string">&quot;margin&quot;</span><span class="token operator">:</span><span class="token string">&quot;0!important&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;padding&quot;</span><span class="token operator">:</span><span class="token string">&quot;0!important&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  el<span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <div class="docs-demo-plugin__display"><div class="docs-demo-plugin__app"></div></div></div><p><strong>进入/离开过渡的持续时间：</strong></p> <p>你可以用 <code>duration</code> 属性明确地指定 CSS 过渡/动画的持续时间 (以毫秒计)：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">:duration</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1000<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>你也可以使用一个对象，分别指定进入和离开的持续时间：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">:duration</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ enter: 500, leave: 800 }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>如果没有为 CSS 过渡/动画指定持续时间，且没有使用钩子事件函数 <code>enter</code>/<code>leave</code> 的 <code>done</code> 回调函数时，框架会通过计算元素的 CSS 过渡/动画属性，自动得出持续时间。如果元素同时使用了 CSS 的过渡及动画效果，会以最长的时间为准。</p> <p><strong>初始渲染的过渡：</strong></p> <p>可以通过 <code>appear</code> 属性，启用节点在初始渲染时的过渡：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">appear</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- ... --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>初始渲染时，默认使用的过渡 CSS 类名：</p> <ul><li><code>transition-appear</code></li> <li><code>transition-appear-active</code></li> <li><code>transition-appear-to</code></li></ul> <p>如果你使用了 <code>&lt;transition name=&quot;fade&quot;&gt;</code>，那么 <code>transition-appear</code> 会替换为 <code>fade-appear</code>。</p> <p>还可以通过以下属性来自定义过渡类名：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span>
  <span class="token attr-name">appear-class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>my-appear<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">appear-active-class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>my-appear-active<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">appear-to-class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>my-appear-to<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- ... --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>可以在属性中添加初始渲染时的钩子事件：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span>
  <span class="token attr-name">appear</span>
  <span class="token attr-name">@before-appear</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>beforeAppear<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">@appear</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>appear<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">@after-appear</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>afterAppear<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">@appear-cancelled</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>appearCancelled<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- ... --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>methods<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// --------</span>
  <span class="token comment">// 进入中</span>
  <span class="token comment">// --------</span>
  <span class="token function-variable function">beforeAppear</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在元素插入前或 `$show` 指令显示前调用</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">appear</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在元素插入后或 `$show` 指令显示后调用</span>
    <span class="token comment">// 当与 CSS 结合使用时，回调函数 done 是可选的</span>
    <span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">afterAppear</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在过渡动画完成后调用</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">appearCancelled</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在过渡动画被取消后调用</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在上面的例子中，无论是添加 <code>appear</code> 属性还是 <code>@appear</code> 钩子都可以启用初始渲染时的过渡。</p> <p><strong>过渡模式：</strong></p> <p>这里还有一个问题，试着点击下面的按钮：</p> <div data-info="mydemo%20%5Bparser%5D%20%5Bhorizontal%5D%20%5Bheight%3D80%5D" data-type="parser" class="docs-demo-plugin__wrapper"><div class="docs-demo-plugin__code"><div class="language-js extra-class"><pre class="language-js"><code>toolkit<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  template<span class="token operator">:</span>
    <span class="token string">'&lt;div @click=&quot;toggle&quot;&gt;\
      &lt;transition name=&quot;fade&quot;&gt;\
        &lt;button $if=&quot;isOn&quot;&gt;on&lt;/button&gt;\
        &lt;button $else&gt;off&lt;/button&gt;\
      &lt;/transition&gt;\
    &lt;/div&gt;'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      isOn<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">toggle</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$setData</span><span class="token punctuation">(</span><span class="token string">&quot;isOn&quot;</span><span class="token punctuation">,</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>isOn<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  style<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;.fade-enter,.fade-leave-to&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;opacity&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;.fade-enter-active,.fade-leave-active&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;transition&quot;</span><span class="token operator">:</span> <span class="token string">&quot;opacity 0.5s&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  el<span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <div class="docs-demo-plugin__display"><div class="docs-demo-plugin__app"></div></div></div><p>在“on”按钮和“off”按钮的过渡中，两个按钮都被重绘了，一个离开过渡的时候，另一个开始进入过渡。这是 <code>&lt;transition&gt;</code> 的默认行为 - 进入和离开同时发生。</p> <p>在元素绝对定位在彼此之上的时候运行正常：</p> <div data-info="mydemo%20%5Bparser%5D%20%5Bhorizontal%5D%20%5Bheight%3D80%5D" data-type="parser" class="docs-demo-plugin__wrapper"><div class="docs-demo-plugin__code"><div class="language-js extra-class"><pre class="language-js"><code>toolkit<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  template<span class="token operator">:</span>
    <span class="token string">'&lt;div @click=&quot;toggle&quot;&gt;\
      &lt;transition name=&quot;fade&quot;&gt;\
        &lt;button $if=&quot;isOn&quot;&gt;on&lt;/button&gt;\
        &lt;button $else&gt;off&lt;/button&gt;\
      &lt;/transition&gt;\
    &lt;/div&gt;'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      isOn<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">toggle</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$setData</span><span class="token punctuation">(</span><span class="token string">&quot;isOn&quot;</span><span class="token punctuation">,</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>isOn<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  style<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;button&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token string">&quot;position&quot;</span><span class="token operator">:</span><span class="token string">&quot;absolute&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;.fade-enter,.fade-leave-to&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;opacity&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;.fade-enter-active,.fade-leave-active&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;transition&quot;</span><span class="token operator">:</span> <span class="token string">&quot;opacity 0.5s&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  el<span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <div class="docs-demo-plugin__display"><div class="docs-demo-plugin__app"></div></div></div><p>然后，我们加上 translate 让它们运动像滑动过渡：</p> <div data-info="mydemo%20%5Bparser%5D%20%5Bhorizontal%5D%20%5Bheight%3D80%5D" data-type="parser" class="docs-demo-plugin__wrapper"><div class="docs-demo-plugin__code"><div class="language-js extra-class"><pre class="language-js"><code>toolkit<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  template<span class="token operator">:</span>
    <span class="token string">'&lt;div @click=&quot;toggle&quot;&gt;\
      &lt;transition name=&quot;fade&quot;&gt;\
        &lt;button $if=&quot;isOn&quot;&gt;on&lt;/button&gt;\
        &lt;button $else&gt;off&lt;/button&gt;\
      &lt;/transition&gt;\
    &lt;/div&gt;'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      isOn<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">toggle</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$setData</span><span class="token punctuation">(</span><span class="token string">&quot;isOn&quot;</span><span class="token punctuation">,</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>isOn<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  style<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;div&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token string">&quot;margin-left&quot;</span><span class="token operator">:</span><span class="token string">&quot;30px&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;button&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token string">&quot;position&quot;</span><span class="token operator">:</span><span class="token string">&quot;absolute&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;.fade-enter&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;opacity&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;transform&quot;</span><span class="token operator">:</span><span class="token string">&quot;translateX(31px)&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;.fade-leave-to&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token string">&quot;opacity&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;transform&quot;</span><span class="token operator">:</span><span class="token string">&quot;translateX(-31px)&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;.fade-enter-active,.fade-leave-active&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;transition&quot;</span><span class="token operator">:</span> <span class="token string">&quot;all 0.5s&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  el<span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <div class="docs-demo-plugin__display"><div class="docs-demo-plugin__app"></div></div></div><p>当同时生效的进入和离开过渡不能满足要求时，可以使用过渡模式：</p> <ul><li><p><code>out-in</code>：当前元素先过渡离开，完成之后新元素过渡进入。</p></li> <li><p><code>in-out</code>：新元素先过渡进入，完成之后当前元素过渡离开。</p></li></ul> <p>用 <code>out-in</code> 重写之前的开关按钮过渡：</p> <div data-info="mydemo%20%5Bparser%5D%20%5Bhorizontal%5D%20%5Bheight%3D80%5D" data-type="parser" class="docs-demo-plugin__wrapper"><div class="docs-demo-plugin__code"><div class="language-js extra-class"><pre class="language-js"><code>toolkit<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  template<span class="token operator">:</span>
    <span class="token string">'&lt;div @click=&quot;toggle&quot;&gt;\
      &lt;transition name=&quot;fade&quot; mode=&quot;out-in&quot;&gt;\
        &lt;button $if=&quot;isOn&quot;&gt;on&lt;/button&gt;\
        &lt;button $else&gt;off&lt;/button&gt;\
      &lt;/transition&gt;\
    &lt;/div&gt;'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      isOn<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">toggle</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$setData</span><span class="token punctuation">(</span><span class="token string">&quot;isOn&quot;</span><span class="token punctuation">,</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>isOn<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  style<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;.fade-enter,.fade-leave-to&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;opacity&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;.fade-enter-active,.fade-leave-active&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;transition&quot;</span><span class="token operator">:</span> <span class="token string">&quot;opacity 0.5s&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  el<span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <div class="docs-demo-plugin__display"><div class="docs-demo-plugin__app"></div></div></div><p>只用添加一个简单的属性，就解决了之前的过渡问题而无需任何额外的代码。</p> <p><code>in-out</code> 模式不是经常用到，但对于一些稍微不同的过渡效果还是有用的。将之前滑动淡出的例子结合：</p> <div data-info="mydemo%20%5Bparser%5D%20%5Bhorizontal%5D%20%5Bheight%3D80%5D" data-type="parser" class="docs-demo-plugin__wrapper"><div class="docs-demo-plugin__code"><div class="language-js extra-class"><pre class="language-js"><code>toolkit<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  template<span class="token operator">:</span>
    <span class="token string">'&lt;div @click=&quot;toggle&quot;&gt;\
      &lt;transition name=&quot;fade&quot; mode=&quot;in-out&quot;&gt;\
        &lt;button $if=&quot;isOn&quot;&gt;on&lt;/button&gt;\
        &lt;button $else&gt;off&lt;/button&gt;\
      &lt;/transition&gt;\
    &lt;/div&gt;'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      isOn<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">toggle</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$setData</span><span class="token punctuation">(</span><span class="token string">&quot;isOn&quot;</span><span class="token punctuation">,</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>isOn<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  style<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;div&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token string">&quot;margin-left&quot;</span><span class="token operator">:</span><span class="token string">&quot;30px&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;button&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token string">&quot;position&quot;</span><span class="token operator">:</span><span class="token string">&quot;absolute&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;.fade-enter&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;opacity&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;transform&quot;</span><span class="token operator">:</span><span class="token string">&quot;translateX(31px)&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;.fade-leave-to&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token string">&quot;opacity&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;transform&quot;</span><span class="token operator">:</span><span class="token string">&quot;translateX(-31px)&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;.fade-enter-active,.fade-leave-active&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;transition&quot;</span><span class="token operator">:</span> <span class="token string">&quot;all 0.5s&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  el<span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <div class="docs-demo-plugin__display"><div class="docs-demo-plugin__app"></div></div></div><p><strong>列表的排序过渡：</strong></p> <p><code>&lt;transition&gt;</code> 还有一个特殊之处。不仅可以在进入和离开时生成过渡/动画，还可以在元素改变位置时生成滑动过渡的效果。</p> <p>要使用这个功能只需在 <code>&lt;transition&gt;</code> 上添加 <code>move</code> 属性，并了解 <code>transition-move</code> 这个class，它会在元素改变定位的过程中应用。像之前的类名一样，可以通过 <code>name</code> 属性来自定义前缀，也可以通过 <code>move-class</code> 属性设置自定义类名。</p> <p><code>transition-move</code> 对于设置过渡的切换时机和过渡曲线非常有用，你会看到如下的例子：</p> <div data-info="mydemo%20%5Bparser%5D%20%5Bhorizontal%5D%20%5Bheight%3D260%5D%20%5Bplugins%3D.%2Flodash.js%5D" data-type="parser" class="docs-demo-plugin__wrapper"><div class="docs-demo-plugin__code"><div class="language-js extra-class"><pre class="language-js"><code>toolkit<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  template<span class="token operator">:</span>
    <span class="token string">'&lt;div&gt;\
      &lt;button @click=&quot;shuffle&quot;&gt;洗牌&lt;/button&gt;\
      &lt;transition name=&quot;flip-list&quot; move&gt;\
        &lt;li $for=&quot;item in items&quot; :key=&quot;item&quot;&gt;\
          {{ item }}\
        &lt;/li&gt;\
      &lt;/transition&gt;\
    &lt;/div&gt;'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      items<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">shuffle</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$setData</span><span class="token punctuation">(</span><span class="token string">&quot;items&quot;</span><span class="token punctuation">,</span> _<span class="token punctuation">.</span><span class="token function">shuffle</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  style<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;.flip-list-move&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;transition&quot;</span><span class="token operator">:</span> <span class="token string">&quot;transform 1s cubic-bezier(0.175, 0.885, 0.320, 1.275)&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  el<span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <div class="docs-demo-plugin__display"><div class="docs-demo-plugin__app"></div></div></div><p>列表的排序过渡可以与进入/离开过渡及过渡模式结合使用：</p> <div data-info="mydemo%20%5Bparser%5D%20%5Bhorizontal%5D%20%5Bheight%3D200%5D%20%5Bplugins%3D.%2Flodash.js%5D" data-type="parser" class="docs-demo-plugin__wrapper"><div class="docs-demo-plugin__code"><div class="language-js extra-class"><pre class="language-js"><code>toolkit<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  template<span class="token operator">:</span>
    <span class="token string">'&lt;div&gt;\
      &lt;button @click=&quot;change&quot;&gt;换一批&lt;/button&gt;\
      &lt;transition name=&quot;flip-list&quot; move mode=&quot;out-in&quot;&gt;\
        &lt;li $for=&quot;item in items&quot; :key=&quot;item&quot;&gt;\
          {{ item }}\
        &lt;/li&gt;\
      &lt;/transition&gt;\
    &lt;/div&gt;'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      sample<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      items<span class="token operator">:</span> <span class="token keyword">null</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">change</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$setData</span><span class="token punctuation">(</span><span class="token string">&quot;items&quot;</span><span class="token punctuation">,</span> _<span class="token punctuation">.</span><span class="token function">sampleSize</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>sample<span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">change</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  style<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;.flip-list-move&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;transition&quot;</span><span class="token operator">:</span> <span class="token string">&quot;transform 1.2s ease-out&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;.flip-list-enter,.flip-list-leave-to&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;opacity&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;.flip-list-enter-active,.flip-list-leave-active&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;transition&quot;</span><span class="token operator">:</span> <span class="token string">&quot;opacity 0.6s&quot;</span><span class="token punctuation">,</span>

      <span class="token comment">// 当进入/离开过渡与滑动过渡同时作用于一个元素时，</span>
      <span class="token comment">// move class 需做兼容处理，否则 move class 的样式可能会被覆盖</span>
      <span class="token string">&quot;&amp;.flip-list-move&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;transition&quot;</span><span class="token operator">:</span> <span class="token string">&quot;opacity 0.6s,transform 1.2s ease-out&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;.flip-list-leave-active&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// 离开过渡时使用绝对定位脱离布局，从而使其它元素的位置发生变化</span>
      <span class="token string">&quot;position&quot;</span><span class="token operator">:</span> <span class="token string">&quot;absolute&quot;</span> 
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  el<span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <div class="docs-demo-plugin__display"><div class="docs-demo-plugin__app"></div></div></div></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/options.html" class="prev">
        选项
      </a></span> <span class="next"><a href="/docs/instance.html">
        实例方法/属性
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.bf9abde5.js" defer></script><script src="/docs/assets/js/2.7081bd21.js" defer></script><script src="/docs/assets/js/13.3fc83587.js" defer></script>
  </body>
</html>
