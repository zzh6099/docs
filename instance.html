<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>实例方法/属性 | Toolkit Docs</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/docs/assets/css/0.styles.61c225ce.css" as="style"><link rel="preload" href="/docs/assets/js/app.bf9abde5.js" as="script"><link rel="preload" href="/docs/assets/js/2.7081bd21.js" as="script"><link rel="preload" href="/docs/assets/js/9.9b30310a.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.17413e17.js"><link rel="prefetch" href="/docs/assets/js/11.3ba4e15f.js"><link rel="prefetch" href="/docs/assets/js/12.81f60ba6.js"><link rel="prefetch" href="/docs/assets/js/13.3fc83587.js"><link rel="prefetch" href="/docs/assets/js/3.d04f4a97.js"><link rel="prefetch" href="/docs/assets/js/4.61cab350.js"><link rel="prefetch" href="/docs/assets/js/5.37fc0b0c.js"><link rel="prefetch" href="/docs/assets/js/6.063b7e44.js"><link rel="prefetch" href="/docs/assets/js/7.2d382900.js"><link rel="prefetch" href="/docs/assets/js/8.6c1f93ed.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.61c225ce.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">Toolkit Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/" class="nav-link">
  框架文档
</a></div><div class="nav-item"><a href="/docs/other.html" class="nav-link">
  toolkit 工具库
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/" class="nav-link">
  框架文档
</a></div><div class="nav-item"><a href="/docs/other.html" class="nav-link">
  toolkit 工具库
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/docs/" aria-current="page" class="sidebar-link">介绍</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/#键路径" class="sidebar-link">键路径</a></li></ul></li><li><a href="/docs/options.html" class="sidebar-link">选项</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/options.html#dom" class="sidebar-link">DOM</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/options.html#el" class="sidebar-link">el</a></li><li class="sidebar-sub-header"><a href="/docs/options.html#template" class="sidebar-link">template</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/options.html#数据" class="sidebar-link">数据</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/options.html#data" class="sidebar-link">data</a></li><li class="sidebar-sub-header"><a href="/docs/options.html#props" class="sidebar-link">props</a></li><li class="sidebar-sub-header"><a href="/docs/options.html#computed" class="sidebar-link">computed</a></li><li class="sidebar-sub-header"><a href="/docs/options.html#methods" class="sidebar-link">methods</a></li><li class="sidebar-sub-header"><a href="/docs/options.html#watch" class="sidebar-link">watch</a></li><li class="sidebar-sub-header"><a href="/docs/options.html#emits" class="sidebar-link">emits</a></li><li class="sidebar-sub-header"><a href="/docs/options.html#store" class="sidebar-link">store</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/options.html#资源" class="sidebar-link">资源</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/options.html#mixins" class="sidebar-link">mixins</a></li><li class="sidebar-sub-header"><a href="/docs/options.html#components" class="sidebar-link">components</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/options.html#生命周期钩子" class="sidebar-link">生命周期钩子</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/options.html#beforemount" class="sidebar-link">beforeMount</a></li><li class="sidebar-sub-header"><a href="/docs/options.html#mounted" class="sidebar-link">mounted</a></li><li class="sidebar-sub-header"><a href="/docs/options.html#beforeupdate" class="sidebar-link">beforeUpdate</a></li><li class="sidebar-sub-header"><a href="/docs/options.html#updated" class="sidebar-link">updated</a></li><li class="sidebar-sub-header"><a href="/docs/options.html#beforeunmount" class="sidebar-link">beforeUnmount</a></li><li class="sidebar-sub-header"><a href="/docs/options.html#unmounted" class="sidebar-link">unmounted</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/options.html#其它选项" class="sidebar-link">其它选项</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/options.html#inheritattrs" class="sidebar-link">inheritAttrs</a></li><li class="sidebar-sub-header"><a href="/docs/options.html#comments" class="sidebar-link">comments</a></li><li class="sidebar-sub-header"><a href="/docs/options.html#style" class="sidebar-link">style</a></li></ul></li></ul></li><li><a href="/docs/template.html" class="sidebar-link">模板</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/template.html#语法" class="sidebar-link">语法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/template.html#绑定数据-文本插值" class="sidebar-link">绑定数据-文本插值</a></li><li class="sidebar-sub-header"><a href="/docs/template.html#绑定数据-动态属性" class="sidebar-link">绑定数据-动态属性</a></li><li class="sidebar-sub-header"><a href="/docs/template.html#class-与-style" class="sidebar-link">class 与 style</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/template.html#指令" class="sidebar-link">指令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/template.html#for" class="sidebar-link">$for</a></li><li class="sidebar-sub-header"><a href="/docs/template.html#if" class="sidebar-link">$if</a></li><li class="sidebar-sub-header"><a href="/docs/template.html#else-if" class="sidebar-link">$else-if</a></li><li class="sidebar-sub-header"><a href="/docs/template.html#else" class="sidebar-link">$else</a></li><li class="sidebar-sub-header"><a href="/docs/template.html#show" class="sidebar-link">$show</a></li><li class="sidebar-sub-header"><a href="/docs/template.html#bind" class="sidebar-link">$bind</a></li><li class="sidebar-sub-header"><a href="/docs/template.html#model" class="sidebar-link">$model</a></li><li class="sidebar-sub-header"><a href="/docs/template.html#ref" class="sidebar-link">$ref</a></li><li class="sidebar-sub-header"><a href="/docs/template.html#allow-html" class="sidebar-link">$allow-html</a></li><li class="sidebar-sub-header"><a href="/docs/template.html#once" class="sidebar-link">$once</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/template.html#特殊属性" class="sidebar-link">特殊属性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/template.html#key" class="sidebar-link">key</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/template.html#事件绑定" class="sidebar-link">事件绑定</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/template.html#事件绑定符" class="sidebar-link">事件绑定符 “@”</a></li><li class="sidebar-sub-header"><a href="/docs/template.html#箭头函数" class="sidebar-link">箭头函数</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/template.html#内置元素" class="sidebar-link">内置元素</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/template.html#block" class="sidebar-link">block</a></li><li class="sidebar-sub-header"><a href="/docs/template.html#slot" class="sidebar-link">slot</a></li><li class="sidebar-sub-header"><a href="/docs/template.html#transition" class="sidebar-link">transition</a></li></ul></li></ul></li><li><a href="/docs/instance.html" aria-current="page" class="active sidebar-link">实例方法/属性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/instance.html#方法" class="sidebar-link">方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/instance.html#setdata" class="sidebar-link">$setData</a></li><li class="sidebar-sub-header"><a href="/docs/instance.html#emit" class="sidebar-link">$emit</a></li><li class="sidebar-sub-header"><a href="/docs/instance.html#watch" class="sidebar-link">$watch</a></li><li class="sidebar-sub-header"><a href="/docs/instance.html#mount" class="sidebar-link">$mount</a></li><li class="sidebar-sub-header"><a href="/docs/instance.html#destroy" class="sidebar-link">$destroy</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/instance.html#属性" class="sidebar-link">属性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/instance.html#refs" class="sidebar-link">$refs</a></li><li class="sidebar-sub-header"><a href="/docs/instance.html#attrs" class="sidebar-link">$attrs</a></li><li class="sidebar-sub-header"><a href="/docs/instance.html#el" class="sidebar-link">$el</a></li><li class="sidebar-sub-header"><a href="/docs/instance.html#parent" class="sidebar-link">$parent</a></li><li class="sidebar-sub-header"><a href="/docs/instance.html#store" class="sidebar-link">$store</a></li></ul></li></ul></li><li><a href="/docs/component.html" class="sidebar-link">组件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/component.html#介绍" class="sidebar-link">介绍</a></li><li class="sidebar-sub-header"><a href="/docs/component.html#注册局部组件" class="sidebar-link">注册局部组件</a></li><li class="sidebar-sub-header"><a href="/docs/component.html#注册全局组件" class="sidebar-link">注册全局组件</a></li><li class="sidebar-sub-header"><a href="/docs/component.html#组件库" class="sidebar-link">组件库</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/component.html#导出组件" class="sidebar-link">导出组件</a></li><li class="sidebar-sub-header"><a href="/docs/component.html#导入组件" class="sidebar-link">导入组件</a></li></ul></li></ul></li><li><a href="/docs/store.html" class="sidebar-link">状态管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/store.html#介绍" class="sidebar-link">介绍</a></li><li class="sidebar-sub-header"><a href="/docs/store.html#state" class="sidebar-link">state</a></li><li class="sidebar-sub-header"><a href="/docs/store.html#getters" class="sidebar-link">getters</a></li><li class="sidebar-sub-header"><a href="/docs/store.html#actions" class="sidebar-link">actions</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="实例方法-属性"><a href="#实例方法-属性" class="header-anchor">#</a> 实例方法/属性</h1> <h2 id="方法"><a href="#方法" class="header-anchor">#</a> 方法</h2> <h3 id="setdata"><a href="#setdata" class="header-anchor">#</a> $setData</h3> <ul><li><p><strong>用法</strong>：</p> <p>用于更新 <code>data</code> 中的数据。接收参数方式有两种：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//更新一个数据</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$setData</span><span class="token punctuation">(</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">,</span>val<span class="token punctuation">)</span>

<span class="token comment">//更新多个数据</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token string">&quot;key1&quot;</span><span class="token operator">:</span>val1<span class="token punctuation">,</span>
  <span class="token string">&quot;key2&quot;</span><span class="token operator">:</span>val2
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>如果数据是引用类型（数组/对象），可以使用键路径，修改其内部的数据：</p> <div data-info="mydemo%20%5Bparser%5D%20%5Bheight%3D100%5D" data-type="parser" class="docs-demo-plugin__wrapper"><div class="docs-demo-plugin__code"><div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-js"><code>toolkit<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  template<span class="token operator">:</span>
    <span class="token string">'&lt;div&gt;{{a.b[0].c}}&lt;/div&gt;\
    &lt;button @click=&quot;change&quot;&gt;点一下&lt;/button&gt;'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      a<span class="token operator">:</span> <span class="token punctuation">{</span>
        b<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> c<span class="token operator">:</span> <span class="token string">&quot;message&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">change</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> randomChar <span class="token operator">=</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">26</span> <span class="token operator">+</span> <span class="token number">98</span> <span class="token operator">|</span> <span class="token number">0</span><span class="token punctuation">)</span>

      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$setData</span><span class="token punctuation">(</span><span class="token string">&quot;a.b[0].c&quot;</span><span class="token punctuation">,</span> randomChar<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  el<span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <div class="docs-demo-plugin__display"><div class="docs-demo-plugin__app"></div></div></div><p>数据更新是实时的，你可以在调用 <code>$setData</code> 后，立即访问到新的数据值。但模板更新是异步的，意味着连续多次调用 <code>$setData</code> 不会触发多次模板更新。</p> <p><code>$setData</code> 使用<strong>浅比较</strong>去确定值是否改变，只有值改变才会触发更新，所以当你修改一个在对象/数组内嵌套的某些数据时，你可以：</p> <ol><li>使用键路径直接修改嵌套的数据。</li> <li>创建一个新的对象/数组。</li> <li>使用 <code>$setData.force</code> 强制触发更新。</li></ol> <div data-info="mydemo%20%5Bparser%5D%20%5Bheight%3D140%5D" data-type="parser" class="docs-demo-plugin__wrapper"><div class="docs-demo-plugin__code"><div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><div class="highlighted"> </div><br><br><br><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-js"><code>toolkit<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  template<span class="token operator">:</span>
    <span class="token string">'&lt;div&gt;{{arr}}&lt;/div&gt;\
    &lt;button @click=&quot;keyPath&quot;&gt;使用键路径修改数据&lt;/button&gt;\
    &lt;br&gt;\
    &lt;button @click=&quot;newRef&quot;&gt;追加新数据，创建一个新数组&lt;/button&gt;\
    &lt;br&gt;\
    &lt;button @click=&quot;force&quot;&gt;追加新数据，强制触发更新&lt;/button&gt;'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      arr<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">random</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span> <span class="token operator">|</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">keyPath</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$setData</span><span class="token punctuation">(</span><span class="token string">&quot;arr[1]&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">newRef</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> arr$ <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>arr<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$setData</span><span class="token punctuation">(</span><span class="token string">&quot;arr&quot;</span><span class="token punctuation">,</span> arr$<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">force</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$setData<span class="token punctuation">.</span><span class="token function">force</span><span class="token punctuation">(</span><span class="token string">&quot;arr&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>arr<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  el<span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <div class="docs-demo-plugin__display"><div class="docs-demo-plugin__app"></div></div></div></li></ul> <h3 id="emit"><a href="#emit" class="header-anchor">#</a> $emit</h3> <ul><li><p><strong>参数</strong>：</p> <ul><li><code>{string} eventName</code> - 自定义事件名称。</li> <li><code>[...args]</code> - 可选，提供给监听器回调函数的参数。</li></ul></li> <li><p><strong>用法</strong>：</p> <p>用于触发组件的自定义事件。第一个参数为事件名称，后面的所有参数都会传给父组件的监听器回调。如果监听器回调使用内联语句，语句要通过 <code>$args</code> 访问这些参数，参考<a href="/docs/template.html#事件绑定符">模板 - 事件绑定</a>。</p> <p>组件中通过 <code>$emit</code> 触发的事件需在选项 <code>emits</code> 中声明，否则监听器会被组件的根元素继承或出现在 <code>$attrs</code> 中。参考<a href="/docs/options.html#emits">选项 - emits</a></p> <div data-info="mydemo%20%5Bparser%5D%20%5Bheight%3D100%5D" data-type="parser" class="docs-demo-plugin__wrapper"><div class="docs-demo-plugin__code"><div class="language-js extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">EmitExample</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    template<span class="token operator">:</span> <span class="token string">'&lt;button @click=&quot;emitClick&quot;&gt;点击触发 test 事件&lt;/button&gt;'</span><span class="token punctuation">,</span>
    emits<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    methods<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function-variable function">emitClick</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

toolkit<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  template<span class="token operator">:</span>
    <span class="token string">'&lt;EmitExample @test=&quot;test_emit&quot; /&gt;\
    &lt;div&gt;{{ emit_param }}&lt;/div&gt;'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      emit_param<span class="token operator">:</span> <span class="token keyword">null</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">test_emit</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$setData</span><span class="token punctuation">(</span><span class="token string">&quot;emit_param&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span>
    EmitExample<span class="token operator">:</span> EmitExample
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  el<span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <div class="docs-demo-plugin__display"><div class="docs-demo-plugin__app"></div></div></div></li></ul> <h3 id="watch"><a href="#watch" class="header-anchor">#</a> $watch</h3> <ul><li><p><strong>参数</strong>：</p> <ul><li><code>{string} keyPath</code> - 要观察的数据，支持键路径。</li> <li><code>{Function | Object} callback</code> - 数据变更后的回调函数。</li> <li><code>{Object} [options]</code> - 可选，选项对象。</li></ul></li> <li><p><strong>返回值</strong>：<code>{Function} unwatch</code></p></li> <li><p><strong>用法</strong>：</p> <p>用于观察数据变化，回调函数得到的参数为旧值和新值。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$watch</span><span class="token punctuation">(</span><span class="token string">'a.b[0].c'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">oldVal<span class="token punctuation">,</span> newVal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 做点什么</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><code>$watch</code> 返回一个取消观察函数，用来停止触发回调：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> unwatch <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$watch</span><span class="token punctuation">(</span><span class="token string">'a.b[0].c'</span><span class="token punctuation">,</span> callback<span class="token punctuation">)</span>
<span class="token comment">// 之后取消观察</span>
<span class="token function">unwatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></li> <li><p><strong>选项</strong></p> <ul><li><p><strong>deep</strong></p> <p>为了发现对象、数组内部值的变化，可以在选项参数中指定 <code>deep: true</code>。</p> <div class="language-js extra-class"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$watch</span><span class="token punctuation">(</span><span class="token string">'someObject'</span><span class="token punctuation">,</span> callback<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  deep<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$setData</span><span class="token punctuation">(</span><span class="token string">&quot;someObject.nestedValue&quot;</span><span class="token punctuation">,</span> <span class="token number">123</span><span class="token punctuation">)</span>
<span class="token comment">// callback 将被执行</span>
</code></pre></div></li> <li><p><strong>immediate</strong></p> <p>在选项参数中指定 <code>immediate: true</code> 将立即以表达式的当前值触发回调：</p> <div class="language-js extra-class"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br><br></div><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$watch</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> callback<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  immediate<span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 立即以 `a` 的当前值触发回调</span>
</code></pre></div><p><strong>注意</strong>：在带有 <code>immediate</code> 选项时，你不能在<strong>第一次</strong>回调时，在回调<strong>内部</strong>调用取消观察函数 <code>unwatch</code>，因为此时 <code>$watch</code> 未结束执行，<code>unwatch</code> 函数未被返回，仍为 <code>undefined</code>。</p> <div class="language-js extra-class"><div class="highlight-lines"><div class="highlighted"> </div><br><br><br><br><div class="highlighted"> </div><br><div class="highlighted"> </div><br><br></div><pre class="language-js"><code><span class="token comment">// 这会导致报错</span>
<span class="token keyword">var</span> unwatch <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$watch</span><span class="token punctuation">(</span>
  <span class="token string">'value'</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">unwatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> immediate<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre></div><p>如果你仍然希望在回调内部调用取消观察函数 <code>unwatch</code>，你应该<strong>先检查其函数的可用性</strong>：</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><div class="highlighted"> </div><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br><br></div><pre class="language-js"><code><span class="token keyword">var</span> unwatch <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$watch</span><span class="token punctuation">(</span>
  <span class="token string">'value'</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>unwatch<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">unwatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> immediate<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre></div></li></ul></li></ul> <h3 id="mount"><a href="#mount" class="header-anchor">#</a> $mount</h3> <ul><li><p><strong>参数</strong>：</p> <ul><li><code>{Element | string} elementOrSelector</code> - 选择器字符串或 DOM 元素。</li></ul></li> <li><p><strong>用法</strong>：</p> <p>如果没有为根实例提供 <code>el</code> 选项，则实例会处于“未挂载”状态，没有关联的 DOM 元素。可以使用 <code>$mount</code> 手动地挂载一个未挂载的实例。</p> <p>参数可以是选择器字符串，也可以是 DOM 元素。</p> <div class="language-js extra-class"><div class="highlight-lines"><br><br><br><br><div class="highlighted"> </div><br></div><pre class="language-js"><code><span class="token keyword">var</span> app <span class="token operator">=</span> toolkit<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  template<span class="token operator">:</span> <span class="token string">'&lt;div&gt;Hello!&lt;/div&gt;'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">)</span>
</code></pre></div></li></ul> <h3 id="destroy"><a href="#destroy" class="header-anchor">#</a> $destroy</h3> <ul><li><p><strong>用法</strong>：</p> <p>完全销毁一个实例。清理它与其它实例的连接，解绑它的全部事件监听器。</p> <p>触发 <code>beforeUnmount</code> 和 <code>unmounted</code> 的钩子。</p> <p>在大多数场景中你不应该调用这个方法。最好使用 <code>:if</code> 和 <code>:for</code> 指令以数据驱动的方式控制子组件的生命周期。</p></li></ul> <h2 id="属性"><a href="#属性" class="header-anchor">#</a> 属性</h2> <h3 id="refs"><a href="#refs" class="header-anchor">#</a> $refs</h3> <ul><li><p><strong>类型</strong>：<code>Object</code></p></li> <li><p><strong>详细</strong>：</p> <p>一个对象，持有使用 <code>:ref</code> 指令注册过的所有 DOM 元素和组件实例。请参考<a href="/docs/template.html#ref">指令 - :ref</a>。</p></li></ul> <h3 id="attrs"><a href="#attrs" class="header-anchor">#</a> $attrs</h3> <ul><li><p><strong>类型</strong>：<code>Object</code></p></li> <li><p><strong>详细</strong>：</p> <p>没有在组件的 <code>props</code> 或 <code>emits</code> 中定义的属性或事件，会被收集到这里。可以通过 <code>:bind=&quot;$attrs&quot;</code> 传入子组件——这在创建高阶的组件时会非常有用。</p></li></ul> <h3 id="el"><a href="#el" class="header-anchor">#</a> $el</h3> <ul><li><p><strong>类型</strong>：<code>Element</code></p></li> <li><p><strong>详细</strong>：</p> <p>实例挂载的目标 DOM 元素。</p></li></ul> <h3 id="parent"><a href="#parent" class="header-anchor">#</a> $parent</h3> <ul><li><p><strong>类型</strong>：<code>Object</code></p></li> <li><p><strong>详细</strong>：</p> <p>组件的父组件实例。</p></li></ul> <h3 id="store"><a href="#store" class="header-anchor">#</a> $store</h3> <ul><li><p><strong>类型</strong>：<code>Object</code></p></li> <li><p><strong>详细</strong>：</p> <p>状态管理工具 Store 在组件实例中的操作对象，通过该对象可以读写 Store 中的数据，也可以通过 <code>$store.onupdate</code> 方法监听 Store 中数据变化。参考<a href="/docs/store.html">状态管理</a></p></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/template.html" class="prev">
        模板
      </a></span> <span class="next"><a href="/docs/component.html">
        组件
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.bf9abde5.js" defer></script><script src="/docs/assets/js/2.7081bd21.js" defer></script><script src="/docs/assets/js/9.9b30310a.js" defer></script>
  </body>
</html>
